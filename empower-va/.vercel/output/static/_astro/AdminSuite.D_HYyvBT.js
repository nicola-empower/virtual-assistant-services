import{c as O,j as e}from"./createLucideIcon.DNYZ4Shx.js";import{r as i,R as B}from"./index.xAY1PbN_.js";import{D as gt,P as bt,S as vt,V as R,T as y,I as yt,a as bs,b as it,u as mn,C as pn}from"./ContractDocument.DrCOb1YP.js";import{r as gn}from"./index.BiXryvC3.js";import{supabase as P}from"./supabase.DdYAh7EM.js";import{C as bn}from"./circle-alert.kFVLxma3.js";import{A as ct}from"./arrow-right.BC30bGbL.js";import{F as vs}from"./file-text.B0N4wvsd.js";import{X as ys}from"./x.Ci6_K2xs.js";import{C as vn,M as ws}from"./mail.CVKmxSrH.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./tslib.es6.DLa7mYsq.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],wn=O("chevron-right",yn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Nn=O("chevron-left",jn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_t=O("circle-check-big",Cn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dt=O("clock",Sn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Dn=O("cloud-off",kn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Tn=O("database",En);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Rn=O("ellipsis",An);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],In=O("external-link",Mn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],On=O("file-check",_n);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],js=O("grip-vertical",Ln);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Pn=O("image",zn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Fn=O("key",Bn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Vn=O("layers",$n);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Wn=O("layout-grid",qn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ot=O("loader-circle",Hn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ns=O("lock",Un);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Cs=O("map-pin",Xn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ss=O("palette",Yn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Kn=O("phone",Gn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ks=O("play",Jn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],we=O("plus",Qn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ds=O("save",Zn);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Es=O("shield-alert",er);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ts=O("shield-check",tr);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ts=O("sparkles",sr);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rr=O("square-check-big",nr);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],lr=O("square",ar);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],As=O("trash-2",or);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cr=O("triangle-alert",ir);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ur=O("user-plus",dr);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bt=O("user",hr);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xr=O("users",fr);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],pr=O("wand-sparkles",mr),F=vt.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:40},header:{marginBottom:30,borderBottom:"2px solid #1A565E",paddingBottom:10,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},logo:{width:150,height:"auto"},title:{fontSize:24,color:"#1A565E",fontWeight:"bold",textTransform:"uppercase"},subtitle:{fontSize:12,color:"#6FA388",marginTop:5},section:{marginBottom:20},sectionTitle:{fontSize:14,color:"#1A565E",fontWeight:"bold",borderBottom:"1px solid #eee",paddingBottom:5,marginBottom:10},label:{fontSize:10,color:"#666",marginBottom:4,textTransform:"uppercase"},value:{fontSize:12,color:"#000",marginBottom:10,fontFamily:"Helvetica-Bold"},bodyText:{fontSize:11,lineHeight:1.5,marginBottom:8,color:"#333"},highlightBox:{backgroundColor:"#f0fdf4",padding:15,borderRadius:5,marginBottom:15},footer:{position:"absolute",bottom:30,left:40,right:40,fontSize:10,textAlign:"center",color:"#999",borderTop:"1px solid #eee",paddingTop:10}}),gr=({data:t,logoUrl:s})=>e.jsx(gt,{children:e.jsxs(bt,{size:"A4",style:F.page,children:[e.jsxs(R,{style:F.header,children:[e.jsxs(R,{children:[e.jsx(y,{style:F.title,children:"Project Proposal"}),e.jsx(y,{style:F.subtitle,children:"Prepared by Empower VA Services"})]}),s&&e.jsx(yt,{style:F.logo,src:s})]}),e.jsxs(R,{style:F.section,children:[e.jsx(y,{style:F.label,children:"Prepared For:"}),e.jsx(y,{style:F.value,children:t.clientName||"[Client Name]"}),e.jsx(y,{style:F.label,children:"Project Title:"}),e.jsx(y,{style:F.value,children:t.projectTitle||"[Project Title]"})]}),e.jsxs(R,{style:F.section,children:[e.jsx(y,{style:F.sectionTitle,children:"Scope of Work"}),e.jsx(y,{style:F.bodyText,children:"We are pleased to submit this proposal to support your business. Based on our discussions, the following objectives and deliverables have been identified:"}),e.jsx(R,{style:F.highlightBox,children:e.jsx(y,{style:F.bodyText,children:t.scope||"Detailed scope of work goes here..."})})]}),e.jsxs(R,{style:F.section,children:[e.jsx(y,{style:F.sectionTitle,children:"Timeline"}),e.jsx(y,{style:F.bodyText,children:t.timeline||"Estimated timeline for project completion..."})]}),e.jsxs(R,{style:F.section,children:[e.jsx(y,{style:F.sectionTitle,children:"Investment"}),e.jsx(y,{style:F.bodyText,children:"The total investment for this project is:"}),e.jsx(y,{style:{fontSize:18,color:"#1A565E",fontWeight:"bold",marginTop:5},children:t.investment||"£0.00"})]}),e.jsx(R,{style:F.footer,children:e.jsx(y,{children:"Empower VA Services | Operational Architecture | empowervaservices.co.uk"})})]})}),I=vt.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:40},header:{marginBottom:30,flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},logo:{width:150,height:"auto"},title:{fontSize:32,color:"#1A565E",fontWeight:"bold",textTransform:"uppercase",textAlign:"right"},invoiceDetails:{marginTop:10,textAlign:"right"},label:{fontSize:10,color:"#666",marginBottom:2,textTransform:"uppercase"},value:{fontSize:12,color:"#000",marginBottom:8,fontFamily:"Helvetica-Bold"},table:{display:"table",width:"auto",borderStyle:"solid",borderBottomWidth:1,borderBottomColor:"#eee",marginTop:20},tableRow:{margin:"auto",flexDirection:"row"},tableHeader:{backgroundColor:"#f0fdf4",borderBottomColor:"#1A565E",borderBottomWidth:1,alignItems:"center",height:24,fontStyle:"bold",flexDirection:"row"},colDesc:{width:"60%",paddingLeft:5,fontSize:10,paddingTop:5},colQty:{width:"10%",textAlign:"center",fontSize:10,paddingTop:5},colRate:{width:"15%",textAlign:"right",fontSize:10,paddingTop:5},colAmount:{width:"15%",textAlign:"right",paddingRight:5,fontSize:10,paddingTop:5},rowText:{fontSize:10,paddingTop:5,paddingBottom:5,color:"#333"},totalSection:{marginTop:20,alignItems:"flex-end"},totalLabel:{fontSize:12,fontWeight:"bold",color:"#666"},totalValue:{fontSize:20,fontWeight:"bold",color:"#1A565E"},bankDetails:{marginTop:40,padding:15,backgroundColor:"#f9fafb",borderRadius:5},bankTitle:{fontSize:12,fontWeight:"bold",color:"#1A565E",marginBottom:5},bankText:{fontSize:10,color:"#555",marginBottom:2},footer:{position:"absolute",bottom:30,left:40,right:40,fontSize:10,textAlign:"center",color:"#999",borderTop:"1px solid #eee",paddingTop:10}}),br=({data:t,logoUrl:s})=>e.jsx(gt,{children:e.jsxs(bt,{size:"A4",style:I.page,children:[e.jsxs(R,{style:I.header,children:[s&&e.jsx(yt,{style:I.logo,src:s}),e.jsxs(R,{children:[e.jsx(y,{style:I.title,children:"INVOICE"}),e.jsxs(R,{style:I.invoiceDetails,children:[e.jsx(y,{style:I.label,children:"Invoice #"}),e.jsx(y,{style:I.value,children:t.invoiceNumber||"001"}),e.jsx(y,{style:I.label,children:"Date"}),e.jsx(y,{style:I.value,children:new Date().toLocaleDateString()})]})]})]}),e.jsxs(R,{style:{marginBottom:30},children:[e.jsx(y,{style:I.label,children:"Bill To:"}),e.jsx(y,{style:I.value,children:t.clientName||"[Client Name]"})]}),e.jsxs(R,{style:I.tableHeader,children:[e.jsx(y,{style:I.colDesc,children:"DESCRIPTION"}),e.jsx(y,{style:I.colQty,children:"QTY"}),e.jsx(y,{style:I.colRate,children:"RATE"}),e.jsx(y,{style:I.colAmount,children:"AMOUNT"})]}),e.jsxs(R,{style:I.tableRow,children:[e.jsx(y,{style:{...I.colDesc,...I.rowText},children:t.description||"Service Rendered"}),e.jsx(y,{style:{...I.colQty,...I.rowText},children:t.qty||"1"}),e.jsx(y,{style:{...I.colRate,...I.rowText},children:t.rate||"0.00"}),e.jsx(y,{style:{...I.colAmount,...I.rowText},children:t.amount||"0.00"})]}),e.jsxs(R,{style:I.totalSection,children:[e.jsx(y,{style:I.totalLabel,children:"TOTAL"}),e.jsx(y,{style:I.totalValue,children:t.amount||"£0.00"})]}),e.jsxs(R,{style:I.bankDetails,children:[e.jsx(y,{style:I.bankTitle,children:"Payment Details"}),e.jsx(y,{style:I.bankText,children:"Bank: Starling Bank"}),e.jsx(y,{style:I.bankText,children:"Account Name: Nicola Berry"}),e.jsx(y,{style:I.bankText,children:"Sort Code: 608371"}),e.jsx(y,{style:I.bankText,children:"Account No: 37753996"})]}),e.jsx(R,{style:I.footer,children:e.jsx(y,{children:"Thank you for your business! | Empower VA Services"})})]})});var qe=gn();function vr(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return i.useMemo(()=>r=>{s.forEach(a=>a(r))},s)}const wt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ie(t){const s=Object.prototype.toString.call(t);return s==="[object Window]"||s==="[object global]"}function Ft(t){return"nodeType"in t}function Y(t){var s,n;return t?Ie(t)?t:Ft(t)&&(s=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?s:window:window}function $t(t){const{Document:s}=Y(t);return t instanceof s}function Ke(t){return Ie(t)?!1:t instanceof Y(t).HTMLElement}function Rs(t){return t instanceof Y(t).SVGElement}function _e(t){return t?Ie(t)?t.document:Ft(t)?$t(t)?t:Ke(t)||Rs(t)?t.ownerDocument:document:document:document}const re=wt?i.useLayoutEffect:i.useEffect;function jt(t){const s=i.useRef(t);return re(()=>{s.current=t}),i.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return s.current==null?void 0:s.current(...r)},[])}function yr(){const t=i.useRef(null),s=i.useCallback((r,a)=>{t.current=setInterval(r,a)},[]),n=i.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[s,n]}function Xe(t,s){s===void 0&&(s=[t]);const n=i.useRef(t);return re(()=>{n.current!==t&&(n.current=t)},s),n}function Je(t,s){const n=i.useRef();return i.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...s])}function ut(t){const s=jt(t),n=i.useRef(null),r=i.useCallback(a=>{a!==n.current&&s?.(a,n.current),n.current=a},[]);return[n,r]}function ht(t){const s=i.useRef();return i.useEffect(()=>{s.current=t},[t]),s.current}let At={};function Qe(t,s){return i.useMemo(()=>{if(s)return s;const n=At[t]==null?0:At[t]+1;return At[t]=n,t+"-"+n},[t,s])}function Ms(t){return function(s){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((l,o)=>{const d=Object.entries(o);for(const[c,u]of d){const h=l[c];h!=null&&(l[c]=h+t*u)}return l},{...s})}}const Me=Ms(1),Ye=Ms(-1);function wr(t){return"clientX"in t&&"clientY"in t}function Nt(t){if(!t)return!1;const{KeyboardEvent:s}=Y(t.target);return s&&t instanceof s}function jr(t){if(!t)return!1;const{TouchEvent:s}=Y(t.target);return s&&t instanceof s}function ft(t){if(jr(t)){if(t.touches&&t.touches.length){const{clientX:s,clientY:n}=t.touches[0];return{x:s,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:s,clientY:n}=t.changedTouches[0];return{x:s,y:n}}}return wr(t)?{x:t.clientX,y:t.clientY}:null}const je=Object.freeze({Translate:{toString(t){if(!t)return;const{x:s,y:n}=t;return"translate3d("+(s?Math.round(s):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:s,scaleY:n}=t;return"scaleX("+s+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[je.Translate.toString(t),je.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:s,duration:n,easing:r}=t;return s+" "+n+"ms "+r}}}),ss="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Nr(t){return t.matches(ss)?t:t.querySelector(ss)}const Cr={display:"none"};function Sr(t){let{id:s,value:n}=t;return B.createElement("div",{id:s,style:Cr},n)}function kr(t){let{id:s,announcement:n,ariaLiveType:r="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return B.createElement("div",{id:s,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function Dr(){const[t,s]=i.useState("");return{announce:i.useCallback(r=>{r!=null&&s(r)},[]),announcement:t}}const Is=i.createContext(null);function Er(t){const s=i.useContext(Is);i.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(t)},[t,s])}function Tr(){const[t]=i.useState(()=>new Set),s=i.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[i.useCallback(r=>{let{type:a,event:l}=r;t.forEach(o=>{var d;return(d=o[a])==null?void 0:d.call(o,l)})},[t]),s]}const Ar={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Rr={onDragStart(t){let{active:s}=t;return"Picked up draggable item "+s.id+"."},onDragOver(t){let{active:s,over:n}=t;return n?"Draggable item "+s.id+" was moved over droppable area "+n.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(t){let{active:s,over:n}=t;return n?"Draggable item "+s.id+" was dropped over droppable area "+n.id:"Draggable item "+s.id+" was dropped."},onDragCancel(t){let{active:s}=t;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function Mr(t){let{announcements:s=Rr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Ar}=t;const{announce:l,announcement:o}=Dr(),d=Qe("DndLiveRegion"),[c,u]=i.useState(!1);if(i.useEffect(()=>{u(!0)},[]),Er(i.useMemo(()=>({onDragStart(f){let{active:g}=f;l(s.onDragStart({active:g}))},onDragMove(f){let{active:g,over:x}=f;s.onDragMove&&l(s.onDragMove({active:g,over:x}))},onDragOver(f){let{active:g,over:x}=f;l(s.onDragOver({active:g,over:x}))},onDragEnd(f){let{active:g,over:x}=f;l(s.onDragEnd({active:g,over:x}))},onDragCancel(f){let{active:g,over:x}=f;l(s.onDragCancel({active:g,over:x}))}}),[l,s])),!c)return null;const h=B.createElement(B.Fragment,null,B.createElement(Sr,{id:r,value:a.draggable}),B.createElement(kr,{id:d,announcement:o}));return n?qe.createPortal(h,n):h}var W;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(W||(W={}));function xt(){}function ns(t,s){return i.useMemo(()=>({sensor:t,options:s??{}}),[t,s])}function Ir(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return i.useMemo(()=>[...s].filter(r=>r!=null),[...s])}const ae=Object.freeze({x:0,y:0});function _r(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function Or(t,s){const n=ft(t);if(!n)return"0 0";const r={x:(n.x-s.left)/s.width*100,y:(n.y-s.top)/s.height*100};return r.x+"% "+r.y+"%"}function Lr(t,s){let{data:{value:n}}=t,{data:{value:r}}=s;return n-r}function zr(t,s){let{data:{value:n}}=t,{data:{value:r}}=s;return r-n}function rs(t){let{left:s,top:n,height:r,width:a}=t;return[{x:s,y:n},{x:s+a,y:n},{x:s,y:n+r},{x:s+a,y:n+r}]}function _s(t,s){if(!t||t.length===0)return null;const[n]=t;return n[s]}const Os=t=>{let{collisionRect:s,droppableRects:n,droppableContainers:r}=t;const a=rs(s),l=[];for(const o of r){const{id:d}=o,c=n.get(d);if(c){const u=rs(c),h=a.reduce((g,x,j)=>g+_r(u[j],x),0),f=Number((h/4).toFixed(4));l.push({id:d,data:{droppableContainer:o,value:f}})}}return l.sort(Lr)};function Pr(t,s){const n=Math.max(s.top,t.top),r=Math.max(s.left,t.left),a=Math.min(s.left+s.width,t.left+t.width),l=Math.min(s.top+s.height,t.top+t.height),o=a-r,d=l-n;if(r<a&&n<l){const c=s.width*s.height,u=t.width*t.height,h=o*d,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const Br=t=>{let{collisionRect:s,droppableRects:n,droppableContainers:r}=t;const a=[];for(const l of r){const{id:o}=l,d=n.get(o);if(d){const c=Pr(d,s);c>0&&a.push({id:o,data:{droppableContainer:l,value:c}})}}return a.sort(zr)};function Fr(t,s,n){return{...t,scaleX:s&&n?s.width/n.width:1,scaleY:s&&n?s.height/n.height:1}}function Ls(t,s){return t&&s?{x:t.left-s.left,y:t.top-s.top}:ae}function $r(t){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((o,d)=>({...o,top:o.top+t*d.y,bottom:o.bottom+t*d.y,left:o.left+t*d.x,right:o.right+t*d.x}),{...n})}}const Vr=$r(1);function zs(t){if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function qr(t,s,n){const r=zs(s);if(!r)return t;const{scaleX:a,scaleY:l,x:o,y:d}=r,c=t.left-o-(1-a)*parseFloat(n),u=t.top-d-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),h=a?t.width/a:t.width,f=l?t.height/l:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const Wr={ignoreTransform:!1};function Oe(t,s){s===void 0&&(s=Wr);let n=t.getBoundingClientRect();if(s.ignoreTransform){const{transform:u,transformOrigin:h}=Y(t).getComputedStyle(t);u&&(n=qr(n,u,h))}const{top:r,left:a,width:l,height:o,bottom:d,right:c}=n;return{top:r,left:a,width:l,height:o,bottom:d,right:c}}function as(t){return Oe(t,{ignoreTransform:!0})}function Hr(t){const s=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:s,bottom:n,width:s,height:n}}function Ur(t,s){return s===void 0&&(s=Y(t).getComputedStyle(t)),s.position==="fixed"}function Xr(t,s){s===void 0&&(s=Y(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=s[a];return typeof l=="string"?n.test(l):!1})}function Ct(t,s){const n=[];function r(a){if(s!=null&&n.length>=s||!a)return n;if($t(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Ke(a)||Rs(a)||n.includes(a))return n;const l=Y(t).getComputedStyle(a);return a!==t&&Xr(a,l)&&n.push(a),Ur(a,l)?n:r(a.parentNode)}return t?r(t):n}function Ps(t){const[s]=Ct(t,1);return s??null}function Rt(t){return!wt||!t?null:Ie(t)?t:Ft(t)?$t(t)||t===_e(t).scrollingElement?window:Ke(t)?t:null:null}function Bs(t){return Ie(t)?t.scrollX:t.scrollLeft}function Fs(t){return Ie(t)?t.scrollY:t.scrollTop}function Lt(t){return{x:Bs(t),y:Fs(t)}}var H;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(H||(H={}));function $s(t){return!wt||!t?!1:t===document.scrollingElement}function Vs(t){const s={x:0,y:0},n=$s(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=s.y,l=t.scrollLeft<=s.x,o=t.scrollTop>=r.y,d=t.scrollLeft>=r.x;return{isTop:a,isLeft:l,isBottom:o,isRight:d,maxScroll:r,minScroll:s}}const Yr={x:.2,y:.2};function Gr(t,s,n,r,a){let{top:l,left:o,right:d,bottom:c}=n;r===void 0&&(r=10),a===void 0&&(a=Yr);const{isTop:u,isBottom:h,isLeft:f,isRight:g}=Vs(t),x={x:0,y:0},j={x:0,y:0},m={height:s.height*a.y,width:s.width*a.x};return!u&&l<=s.top+m.height?(x.y=H.Backward,j.y=r*Math.abs((s.top+m.height-l)/m.height)):!h&&c>=s.bottom-m.height&&(x.y=H.Forward,j.y=r*Math.abs((s.bottom-m.height-c)/m.height)),!g&&d>=s.right-m.width?(x.x=H.Forward,j.x=r*Math.abs((s.right-m.width-d)/m.width)):!f&&o<=s.left+m.width&&(x.x=H.Backward,j.x=r*Math.abs((s.left+m.width-o)/m.width)),{direction:x,speed:j}}function Kr(t){if(t===document.scrollingElement){const{innerWidth:l,innerHeight:o}=window;return{top:0,left:0,right:l,bottom:o,width:l,height:o}}const{top:s,left:n,right:r,bottom:a}=t.getBoundingClientRect();return{top:s,left:n,right:r,bottom:a,width:t.clientWidth,height:t.clientHeight}}function qs(t){return t.reduce((s,n)=>Me(s,Lt(n)),ae)}function Jr(t){return t.reduce((s,n)=>s+Bs(n),0)}function Qr(t){return t.reduce((s,n)=>s+Fs(n),0)}function Ws(t,s){if(s===void 0&&(s=Oe),!t)return;const{top:n,left:r,bottom:a,right:l}=s(t);Ps(t)&&(a<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Zr=[["x",["left","right"],Jr],["y",["top","bottom"],Qr]];class Vt{constructor(s,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ct(n),a=qs(r);this.rect={...s},this.width=s.width,this.height=s.height;for(const[l,o,d]of Zr)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=d(r),h=a[l]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class We{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=s}add(s,n,r){var a;(a=this.target)==null||a.addEventListener(s,n,r),this.listeners.push([s,n,r])}}function ea(t){const{EventTarget:s}=Y(t);return t instanceof s?t:_e(t)}function Mt(t,s){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof s=="number"?Math.sqrt(n**2+r**2)>s:"x"in s&&"y"in s?n>s.x&&r>s.y:"x"in s?n>s.x:"y"in s?r>s.y:!1}var ne;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ne||(ne={}));function ls(t){t.preventDefault()}function ta(t){t.stopPropagation()}var _;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(_||(_={}));const Hs={start:[_.Space,_.Enter],cancel:[_.Esc],end:[_.Space,_.Enter,_.Tab]},sa=(t,s)=>{let{currentCoordinates:n}=s;switch(t.code){case _.Right:return{...n,x:n.x+25};case _.Left:return{...n,x:n.x-25};case _.Down:return{...n,y:n.y+25};case _.Up:return{...n,y:n.y-25}}};class qt{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:n}}=s;this.props=s,this.listeners=new We(_e(n)),this.windowListeners=new We(Y(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ne.Resize,this.handleCancel),this.windowListeners.add(ne.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ne.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:n}=this.props,r=s.node.current;r&&Ws(r),n(ae)}handleKeyDown(s){if(Nt(s)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:l=Hs,coordinateGetter:o=sa,scrollBehavior:d="smooth"}=a,{code:c}=s;if(l.end.includes(c)){this.handleEnd(s);return}if(l.cancel.includes(c)){this.handleCancel(s);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:ae;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(s,{active:n,context:r.current,currentCoordinates:h});if(f){const g=Ye(f,h),x={x:0,y:0},{scrollableAncestors:j}=r.current;for(const m of j){const b=s.code,{isTop:k,isRight:D,isLeft:E,isBottom:w,maxScroll:N,minScroll:S}=Vs(m),p=Kr(m),C={x:Math.min(b===_.Right?p.right-p.width/2:p.right,Math.max(b===_.Right?p.left:p.left+p.width/2,f.x)),y:Math.min(b===_.Down?p.bottom-p.height/2:p.bottom,Math.max(b===_.Down?p.top:p.top+p.height/2,f.y))},T=b===_.Right&&!D||b===_.Left&&!E,v=b===_.Down&&!w||b===_.Up&&!k;if(T&&C.x!==f.x){const A=m.scrollLeft+g.x,V=b===_.Right&&A<=N.x||b===_.Left&&A>=S.x;if(V&&!g.y){m.scrollTo({left:A,behavior:d});return}V?x.x=m.scrollLeft-A:x.x=b===_.Right?m.scrollLeft-N.x:m.scrollLeft-S.x,x.x&&m.scrollBy({left:-x.x,behavior:d});break}else if(v&&C.y!==f.y){const A=m.scrollTop+g.y,V=b===_.Down&&A<=N.y||b===_.Up&&A>=S.y;if(V&&!g.x){m.scrollTo({top:A,behavior:d});return}V?x.y=m.scrollTop-A:x.y=b===_.Down?m.scrollTop-N.y:m.scrollTop-S.y,x.y&&m.scrollBy({top:-x.y,behavior:d});break}}this.handleMove(s,Me(Ye(f,this.referenceCoordinates),x))}}}handleMove(s,n){const{onMove:r}=this.props;s.preventDefault(),r(n)}handleEnd(s){const{onEnd:n}=this.props;s.preventDefault(),this.detach(),n()}handleCancel(s){const{onCancel:n}=this.props;s.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}qt.activators=[{eventName:"onKeyDown",handler:(t,s,n)=>{let{keyboardCodes:r=Hs,onActivation:a}=s,{active:l}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const d=l.activatorNode.current;return d&&t.target!==d?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function os(t){return!!(t&&"distance"in t)}function is(t){return!!(t&&"delay"in t)}class Wt{constructor(s,n,r){var a;r===void 0&&(r=ea(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=n;const{event:l}=s,{target:o}=l;this.props=s,this.events=n,this.document=_e(o),this.documentListeners=new We(this.document),this.listeners=new We(r),this.windowListeners=new We(Y(o)),this.initialCoordinates=(a=ft(l))!=null?a:ae,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(ne.Resize,this.handleCancel),this.windowListeners.add(ne.DragStart,ls),this.windowListeners.add(ne.VisibilityChange,this.handleCancel),this.windowListeners.add(ne.ContextMenu,ls),this.documentListeners.add(ne.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(is(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(os(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,n){const{active:r,onPending:a}=this.props;a(r,s,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:s}=this,{onStart:n}=this.props;s&&(this.activated=!0,this.documentListeners.add(ne.Click,ta,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ne.SelectionChange,this.removeTextSelection),n(s))}handleMove(s){var n;const{activated:r,initialCoordinates:a,props:l}=this,{onMove:o,options:{activationConstraint:d}}=l;if(!a)return;const c=(n=ft(s))!=null?n:ae,u=Ye(a,c);if(!r&&d){if(os(d)){if(d.tolerance!=null&&Mt(u,d.tolerance))return this.handleCancel();if(Mt(u,d.distance))return this.handleStart()}if(is(d)&&Mt(u,d.tolerance))return this.handleCancel();this.handlePending(d,u);return}s.cancelable&&s.preventDefault(),o(c)}handleEnd(){const{onAbort:s,onEnd:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleCancel(){const{onAbort:s,onCancel:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleKeydown(s){s.code===_.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const na={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ht extends Wt{constructor(s){const{event:n}=s,r=_e(n.target);super(s,na,r)}}Ht.activators=[{eventName:"onPointerDown",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:r}=s;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const ra={move:{name:"mousemove"},end:{name:"mouseup"}};var zt;(function(t){t[t.RightClick=2]="RightClick"})(zt||(zt={}));class aa extends Wt{constructor(s){super(s,ra,_e(s.event.target))}}aa.activators=[{eventName:"onMouseDown",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:r}=s;return n.button===zt.RightClick?!1:(r?.({event:n}),!0)}}];const It={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class la extends Wt{constructor(s){super(s,It)}static setup(){return window.addEventListener(It.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(It.move.name,s)};function s(){}}}la.activators=[{eventName:"onTouchStart",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:r}=s;const{touches:a}=n;return a.length>1?!1:(r?.({event:n}),!0)}}];var He;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(He||(He={}));var mt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(mt||(mt={}));function oa(t){let{acceleration:s,activator:n=He.Pointer,canScroll:r,draggingRect:a,enabled:l,interval:o=5,order:d=mt.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:g}=t;const x=ca({delta:f,disabled:!l}),[j,m]=yr(),b=i.useRef({x:0,y:0}),k=i.useRef({x:0,y:0}),D=i.useMemo(()=>{switch(n){case He.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case He.DraggableRect:return a}},[n,a,c]),E=i.useRef(null),w=i.useCallback(()=>{const S=E.current;if(!S)return;const p=b.current.x*k.current.x,C=b.current.y*k.current.y;S.scrollBy(p,C)},[]),N=i.useMemo(()=>d===mt.TreeOrder?[...u].reverse():u,[d,u]);i.useEffect(()=>{if(!l||!u.length||!D){m();return}for(const S of N){if(r?.(S)===!1)continue;const p=u.indexOf(S),C=h[p];if(!C)continue;const{direction:T,speed:v}=Gr(S,C,D,s,g);for(const A of["x","y"])x[A][T[A]]||(v[A]=0,T[A]=0);if(v.x>0||v.y>0){m(),E.current=S,j(w,o),b.current=v,k.current=T;return}}b.current={x:0,y:0},k.current={x:0,y:0},m()},[s,w,r,m,l,o,JSON.stringify(D),JSON.stringify(x),j,u,N,h,JSON.stringify(g)])}const ia={x:{[H.Backward]:!1,[H.Forward]:!1},y:{[H.Backward]:!1,[H.Forward]:!1}};function ca(t){let{delta:s,disabled:n}=t;const r=ht(s);return Je(a=>{if(n||!r||!a)return ia;const l={x:Math.sign(s.x-r.x),y:Math.sign(s.y-r.y)};return{x:{[H.Backward]:a.x[H.Backward]||l.x===-1,[H.Forward]:a.x[H.Forward]||l.x===1},y:{[H.Backward]:a.y[H.Backward]||l.y===-1,[H.Forward]:a.y[H.Forward]||l.y===1}}},[n,s,r])}function da(t,s){const n=s!=null?t.get(s):void 0,r=n?n.node.current:null;return Je(a=>{var l;return s==null?null:(l=r??a)!=null?l:null},[r,s])}function ua(t,s){return i.useMemo(()=>t.reduce((n,r)=>{const{sensor:a}=r,l=a.activators.map(o=>({eventName:o.eventName,handler:s(o.handler,r)}));return[...n,...l]},[]),[t,s])}var Ge;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Ge||(Ge={}));var Pt;(function(t){t.Optimized="optimized"})(Pt||(Pt={}));const cs=new Map;function ha(t,s){let{dragging:n,dependencies:r,config:a}=s;const[l,o]=i.useState(null),{frequency:d,measure:c,strategy:u}=a,h=i.useRef(t),f=b(),g=Xe(f),x=i.useCallback(function(k){k===void 0&&(k=[]),!g.current&&o(D=>D===null?k:D.concat(k.filter(E=>!D.includes(E))))},[g]),j=i.useRef(null),m=Je(k=>{if(f&&!n)return cs;if(!k||k===cs||h.current!==t||l!=null){const D=new Map;for(let E of t){if(!E)continue;if(l&&l.length>0&&!l.includes(E.id)&&E.rect.current){D.set(E.id,E.rect.current);continue}const w=E.node.current,N=w?new Vt(c(w),w):null;E.rect.current=N,N&&D.set(E.id,N)}return D}return k},[t,l,n,f,c]);return i.useEffect(()=>{h.current=t},[t]),i.useEffect(()=>{f||x()},[n,f]),i.useEffect(()=>{l&&l.length>0&&o(null)},[JSON.stringify(l)]),i.useEffect(()=>{f||typeof d!="number"||j.current!==null||(j.current=setTimeout(()=>{x(),j.current=null},d))},[d,f,x,...r]),{droppableRects:m,measureDroppableContainers:x,measuringScheduled:l!=null};function b(){switch(u){case Ge.Always:return!1;case Ge.BeforeDragging:return n;default:return!n}}}function Ut(t,s){return Je(n=>t?n||(typeof s=="function"?s(t):t):null,[s,t])}function fa(t,s){return Ut(t,s)}function xa(t){let{callback:s,disabled:n}=t;const r=jt(s),a=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,n]);return i.useEffect(()=>()=>a?.disconnect(),[a]),a}function St(t){let{callback:s,disabled:n}=t;const r=jt(s),a=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[n]);return i.useEffect(()=>()=>a?.disconnect(),[a]),a}function ma(t){return new Vt(Oe(t),t)}function ds(t,s,n){s===void 0&&(s=ma);const[r,a]=i.useState(null);function l(){a(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=s(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const o=xa({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){l();break}}}}),d=St({callback:l});return re(()=>{l(),t?(d?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),o?.disconnect())},[t]),r}function pa(t){const s=Ut(t);return Ls(t,s)}const us=[];function ga(t){const s=i.useRef(t),n=Je(r=>t?r&&r!==us&&t&&s.current&&t.parentNode===s.current.parentNode?r:Ct(t):us,[t]);return i.useEffect(()=>{s.current=t},[t]),n}function ba(t){const[s,n]=i.useState(null),r=i.useRef(t),a=i.useCallback(l=>{const o=Rt(l.target);o&&n(d=>d?(d.set(o,Lt(o)),new Map(d)):null)},[]);return i.useEffect(()=>{const l=r.current;if(t!==l){o(l);const d=t.map(c=>{const u=Rt(c);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,Lt(u)]):null}).filter(c=>c!=null);n(d.length?new Map(d):null),r.current=t}return()=>{o(t),o(l)};function o(d){d.forEach(c=>{const u=Rt(c);u?.removeEventListener("scroll",a)})}},[a,t]),i.useMemo(()=>t.length?s?Array.from(s.values()).reduce((l,o)=>Me(l,o),ae):qs(t):ae,[t,s])}function hs(t,s){s===void 0&&(s=[]);const n=i.useRef(null);return i.useEffect(()=>{n.current=null},s),i.useEffect(()=>{const r=t!==ae;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Ye(t,n.current):ae}function va(t){i.useEffect(()=>{if(!wt)return;const s=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of s)n?.()}},t.map(s=>{let{sensor:n}=s;return n}))}function ya(t,s){return i.useMemo(()=>t.reduce((n,r)=>{let{eventName:a,handler:l}=r;return n[a]=o=>{l(o,s)},n},{}),[t,s])}function Us(t){return i.useMemo(()=>t?Hr(t):null,[t])}const fs=[];function wa(t,s){s===void 0&&(s=Oe);const[n]=t,r=Us(n?Y(n):null),[a,l]=i.useState(fs);function o(){l(()=>t.length?t.map(c=>$s(c)?r:new Vt(s(c),c)):fs)}const d=St({callback:o});return re(()=>{d?.disconnect(),o(),t.forEach(c=>d?.observe(c))},[t]),a}function Xs(t){if(!t)return null;if(t.children.length>1)return t;const s=t.children[0];return Ke(s)?s:t}function ja(t){let{measure:s}=t;const[n,r]=i.useState(null),a=i.useCallback(u=>{for(const{target:h}of u)if(Ke(h)){r(f=>{const g=s(h);return f?{...f,width:g.width,height:g.height}:g});break}},[s]),l=St({callback:a}),o=i.useCallback(u=>{const h=Xs(u);l?.disconnect(),h&&l?.observe(h),r(h?s(h):null)},[s,l]),[d,c]=ut(o);return i.useMemo(()=>({nodeRef:d,rect:n,setRef:c}),[n,d,c])}const Na=[{sensor:Ht,options:{}},{sensor:qt,options:{}}],Ca={current:{}},ot={draggable:{measure:as},droppable:{measure:as,strategy:Ge.WhileDragging,frequency:Pt.Optimized},dragOverlay:{measure:Oe}};class Ue extends Map{get(s){var n;return s!=null&&(n=super.get(s))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:n}=s;return!n})}getNodeFor(s){var n,r;return(n=(r=this.get(s))==null?void 0:r.node.current)!=null?n:void 0}}const Sa={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ue,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:xt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ot,measureDroppableContainers:xt,windowRect:null,measuringScheduled:!1},Ys={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:xt,draggableNodes:new Map,over:null,measureDroppableContainers:xt},Ze=i.createContext(Ys),Gs=i.createContext(Sa);function ka(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ue}}}function Da(t,s){switch(s.type){case W.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case W.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:s.coordinates.x-t.draggable.initialCoordinates.x,y:s.coordinates.y-t.draggable.initialCoordinates.y}}};case W.DragEnd:case W.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case W.RegisterDroppable:{const{element:n}=s,{id:r}=n,a=new Ue(t.droppable.containers);return a.set(r,n),{...t,droppable:{...t.droppable,containers:a}}}case W.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=s,l=t.droppable.containers.get(n);if(!l||r!==l.key)return t;const o=new Ue(t.droppable.containers);return o.set(n,{...l,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case W.UnregisterDroppable:{const{id:n,key:r}=s,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const l=new Ue(t.droppable.containers);return l.delete(n),{...t,droppable:{...t.droppable,containers:l}}}default:return t}}function Ea(t){let{disabled:s}=t;const{active:n,activatorEvent:r,draggableNodes:a}=i.useContext(Ze),l=ht(r),o=ht(n?.id);return i.useEffect(()=>{if(!s&&!r&&l&&o!=null){if(!Nt(l)||document.activeElement===l.target)return;const d=a.get(o);if(!d)return;const{activatorNode:c,node:u}=d;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=Nr(h);if(f){f.focus();break}}})}},[r,s,a,o,l]),null}function Ks(t,s){let{transform:n,...r}=s;return t!=null&&t.length?t.reduce((a,l)=>l({transform:a,...r}),n):n}function Ta(t){return i.useMemo(()=>({draggable:{...ot.draggable,...t?.draggable},droppable:{...ot.droppable,...t?.droppable},dragOverlay:{...ot.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function Aa(t){let{activeNode:s,measure:n,initialRect:r,config:a=!0}=t;const l=i.useRef(!1),{x:o,y:d}=typeof a=="boolean"?{x:a,y:a}:a;re(()=>{if(!o&&!d||!s){l.current=!1;return}if(l.current||!r)return;const u=s?.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=Ls(h,r);if(o||(f.x=0),d||(f.y=0),l.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const g=Ps(u);g&&g.scrollBy({top:f.y,left:f.x})}},[s,o,d,r,n])}const kt=i.createContext({...ae,scaleX:1,scaleY:1});var ye;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ye||(ye={}));const Ra=i.memo(function(s){var n,r,a,l;let{id:o,accessibility:d,autoScroll:c=!0,children:u,sensors:h=Na,collisionDetection:f=Br,measuring:g,modifiers:x,...j}=s;const m=i.useReducer(Da,void 0,ka),[b,k]=m,[D,E]=Tr(),[w,N]=i.useState(ye.Uninitialized),S=w===ye.Initialized,{draggable:{active:p,nodes:C,translate:T},droppable:{containers:v}}=b,A=p!=null?C.get(p):null,V=i.useRef({initial:null,translated:null}),z=i.useMemo(()=>{var X;return p!=null?{id:p,data:(X=A?.data)!=null?X:Ca,rect:V}:null},[p,A]),K=i.useRef(null),[q,Ce]=i.useState(null),[J,et]=i.useState(null),ce=Xe(j,Object.values(j)),Le=Qe("DndDescribedBy",o),tt=i.useMemo(()=>v.getEnabled(),[v]),G=Ta(g),{droppableRects:de,measureDroppableContainers:Ne,measuringScheduled:ze}=ha(tt,{dragging:S,dependencies:[T.x,T.y],config:G.droppable}),te=da(C,p),st=i.useMemo(()=>J?ft(J):null,[J]),xe=xn(),ue=fa(te,G.draggable.measure);Aa({activeNode:p!=null?C.get(p):null,config:xe.layoutShiftCompensation,initialRect:ue,measure:G.draggable.measure});const L=ds(te,G.draggable.measure,ue),Pe=ds(te?te.parentElement:null),le=i.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:v,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=v.getNodeFor((n=le.current.over)==null?void 0:n.id),he=ja({measure:G.dragOverlay.measure}),ke=(r=he.nodeRef.current)!=null?r:te,De=S?(a=he.rect)!=null?a:L:null,Xt=!!(he.nodeRef.current&&he.rect),Yt=pa(Xt?null:L),Dt=Us(ke?Y(ke):null),me=ga(S?Se??te:null),nt=wa(me),rt=Ks(x,{transform:{x:T.x-Yt.x,y:T.y-Yt.y,scaleX:1,scaleY:1},activatorEvent:J,active:z,activeNodeRect:L,containerNodeRect:Pe,draggingNodeRect:De,over:le.current.over,overlayNodeRect:he.rect,scrollableAncestors:me,scrollableAncestorRects:nt,windowRect:Dt}),Gt=st?Me(st,T):null,Kt=ba(me),ln=hs(Kt),on=hs(Kt,[L]),Ee=Me(rt,ln),Te=De?Vr(De,rt):null,Be=z&&Te?f({active:z,collisionRect:Te,droppableRects:de,droppableContainers:tt,pointerCoordinates:Gt}):null,Jt=_s(Be,"id"),[pe,Qt]=i.useState(null),cn=Xt?rt:Me(rt,on),dn=Fr(cn,(l=pe?.rect)!=null?l:null,L),Et=i.useRef(null),Zt=i.useCallback((X,Q)=>{let{sensor:Z,options:ge}=Q;if(K.current==null)return;const se=C.get(K.current);if(!se)return;const ee=X.nativeEvent,oe=new Z({active:K.current,activeNode:se,event:ee,options:ge,context:le,onAbort(U){if(!C.get(U))return;const{onDragAbort:ie}=ce.current,fe={id:U};ie?.(fe),D({type:"onDragAbort",event:fe})},onPending(U,be,ie,fe){if(!C.get(U))return;const{onDragPending:$e}=ce.current,ve={id:U,constraint:be,initialCoordinates:ie,offset:fe};$e?.(ve),D({type:"onDragPending",event:ve})},onStart(U){const be=K.current;if(be==null)return;const ie=C.get(be);if(!ie)return;const{onDragStart:fe}=ce.current,Fe={activatorEvent:ee,active:{id:be,data:ie.data,rect:V}};qe.unstable_batchedUpdates(()=>{fe?.(Fe),N(ye.Initializing),k({type:W.DragStart,initialCoordinates:U,active:be}),D({type:"onDragStart",event:Fe}),Ce(Et.current),et(ee)})},onMove(U){k({type:W.DragMove,coordinates:U})},onEnd:Ae(W.DragEnd),onCancel:Ae(W.DragCancel)});Et.current=oe;function Ae(U){return async function(){const{active:ie,collisions:fe,over:Fe,scrollAdjustedTranslate:$e}=le.current;let ve=null;if(ie&&$e){const{cancelDrop:Ve}=ce.current;ve={activatorEvent:ee,active:ie,collisions:fe,delta:$e,over:Fe},U===W.DragEnd&&typeof Ve=="function"&&await Promise.resolve(Ve(ve))&&(U=W.DragCancel)}K.current=null,qe.unstable_batchedUpdates(()=>{k({type:U}),N(ye.Uninitialized),Qt(null),Ce(null),et(null),Et.current=null;const Ve=U===W.DragEnd?"onDragEnd":"onDragCancel";if(ve){const Tt=ce.current[Ve];Tt?.(ve),D({type:Ve,event:ve})}})}}},[C]),un=i.useCallback((X,Q)=>(Z,ge)=>{const se=Z.nativeEvent,ee=C.get(ge);if(K.current!==null||!ee||se.dndKit||se.defaultPrevented)return;const oe={active:ee};X(Z,Q.options,oe)===!0&&(se.dndKit={capturedBy:Q.sensor},K.current=ge,Zt(Z,Q))},[C,Zt]),es=ua(h,un);va(h),re(()=>{L&&w===ye.Initializing&&N(ye.Initialized)},[L,w]),i.useEffect(()=>{const{onDragMove:X}=ce.current,{active:Q,activatorEvent:Z,collisions:ge,over:se}=le.current;if(!Q||!Z)return;const ee={active:Q,activatorEvent:Z,collisions:ge,delta:{x:Ee.x,y:Ee.y},over:se};qe.unstable_batchedUpdates(()=>{X?.(ee),D({type:"onDragMove",event:ee})})},[Ee.x,Ee.y]),i.useEffect(()=>{const{active:X,activatorEvent:Q,collisions:Z,droppableContainers:ge,scrollAdjustedTranslate:se}=le.current;if(!X||K.current==null||!Q||!se)return;const{onDragOver:ee}=ce.current,oe=ge.get(Jt),Ae=oe&&oe.rect.current?{id:oe.id,rect:oe.rect.current,data:oe.data,disabled:oe.disabled}:null,U={active:X,activatorEvent:Q,collisions:Z,delta:{x:se.x,y:se.y},over:Ae};qe.unstable_batchedUpdates(()=>{Qt(Ae),ee?.(U),D({type:"onDragOver",event:U})})},[Jt]),re(()=>{le.current={activatorEvent:J,active:z,activeNode:te,collisionRect:Te,collisions:Be,droppableRects:de,draggableNodes:C,draggingNode:ke,draggingNodeRect:De,droppableContainers:v,over:pe,scrollableAncestors:me,scrollAdjustedTranslate:Ee},V.current={initial:De,translated:Te}},[z,te,Be,Te,C,ke,De,de,v,pe,me,Ee]),oa({...xe,delta:T,draggingRect:Te,pointerCoordinates:Gt,scrollableAncestors:me,scrollableAncestorRects:nt});const hn=i.useMemo(()=>({active:z,activeNode:te,activeNodeRect:L,activatorEvent:J,collisions:Be,containerNodeRect:Pe,dragOverlay:he,draggableNodes:C,droppableContainers:v,droppableRects:de,over:pe,measureDroppableContainers:Ne,scrollableAncestors:me,scrollableAncestorRects:nt,measuringConfiguration:G,measuringScheduled:ze,windowRect:Dt}),[z,te,L,J,Be,Pe,he,C,v,de,pe,Ne,me,nt,G,ze,Dt]),fn=i.useMemo(()=>({activatorEvent:J,activators:es,active:z,activeNodeRect:L,ariaDescribedById:{draggable:Le},dispatch:k,draggableNodes:C,over:pe,measureDroppableContainers:Ne}),[J,es,z,L,k,Le,C,pe,Ne]);return B.createElement(Is.Provider,{value:E},B.createElement(Ze.Provider,{value:fn},B.createElement(Gs.Provider,{value:hn},B.createElement(kt.Provider,{value:dn},u)),B.createElement(Ea,{disabled:d?.restoreFocus===!1})),B.createElement(Mr,{...d,hiddenTextDescribedById:Le}));function xn(){const X=q?.autoScrollEnabled===!1,Q=typeof c=="object"?c.enabled===!1:c===!1,Z=S&&!X&&!Q;return typeof c=="object"?{...c,enabled:Z}:{enabled:Z}}}),Ma=i.createContext(null),xs="button",Ia="Draggable";function _a(t){let{id:s,data:n,disabled:r=!1,attributes:a}=t;const l=Qe(Ia),{activators:o,activatorEvent:d,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:g}=i.useContext(Ze),{role:x=xs,roleDescription:j="draggable",tabIndex:m=0}=a??{},b=c?.id===s,k=i.useContext(b?kt:Ma),[D,E]=ut(),[w,N]=ut(),S=ya(o,s),p=Xe(n);re(()=>(f.set(s,{id:s,key:l,node:D,activatorNode:w,data:p}),()=>{const T=f.get(s);T&&T.key===l&&f.delete(s)}),[f,s]);const C=i.useMemo(()=>({role:x,tabIndex:m,"aria-disabled":r,"aria-pressed":b&&x===xs?!0:void 0,"aria-roledescription":j,"aria-describedby":h.draggable}),[r,x,m,b,j,h.draggable]);return{active:c,activatorEvent:d,activeNodeRect:u,attributes:C,isDragging:b,listeners:r?void 0:S,node:D,over:g,setNodeRef:E,setActivatorNodeRef:N,transform:k}}function Js(){return i.useContext(Gs)}const Oa="Droppable",La={timeout:25};function za(t){let{data:s,disabled:n=!1,id:r,resizeObserverConfig:a}=t;const l=Qe(Oa),{active:o,dispatch:d,over:c,measureDroppableContainers:u}=i.useContext(Ze),h=i.useRef({disabled:n}),f=i.useRef(!1),g=i.useRef(null),x=i.useRef(null),{disabled:j,updateMeasurementsFor:m,timeout:b}={...La,...a},k=Xe(m??r),D=i.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(k.current)?k.current:[k.current]),x.current=null},b)},[b]),E=St({callback:D,disabled:j||!o}),w=i.useCallback((C,T)=>{E&&(T&&(E.unobserve(T),f.current=!1),C&&E.observe(C))},[E]),[N,S]=ut(w),p=Xe(s);return i.useEffect(()=>{!E||!N.current||(E.disconnect(),f.current=!1,E.observe(N.current))},[N,E]),i.useEffect(()=>(d({type:W.RegisterDroppable,element:{id:r,key:l,disabled:n,node:N,rect:g,data:p}}),()=>d({type:W.UnregisterDroppable,key:l,id:r})),[r]),i.useEffect(()=>{n!==h.current.disabled&&(d({type:W.SetDroppableDisabled,id:r,key:l,disabled:n}),h.current.disabled=n)},[r,l,n,d]),{active:o,rect:g,isOver:c?.id===r,node:N,over:c,setNodeRef:S}}function Pa(t){let{animation:s,children:n}=t;const[r,a]=i.useState(null),[l,o]=i.useState(null),d=ht(n);return!n&&!r&&d&&a(d),re(()=>{if(!l)return;const c=r?.key,u=r?.props.id;if(c==null||u==null){a(null);return}Promise.resolve(s(u,l)).then(()=>{a(null)})},[s,r,l]),B.createElement(B.Fragment,null,n,r?i.cloneElement(r,{ref:o}):null)}const Ba={x:0,y:0,scaleX:1,scaleY:1};function Fa(t){let{children:s}=t;return B.createElement(Ze.Provider,{value:Ys},B.createElement(kt.Provider,{value:Ba},s))}const $a={position:"fixed",touchAction:"none"},Va=t=>Nt(t)?"transform 250ms ease":void 0,qa=i.forwardRef((t,s)=>{let{as:n,activatorEvent:r,adjustScale:a,children:l,className:o,rect:d,style:c,transform:u,transition:h=Va}=t;if(!d)return null;const f=a?u:{...u,scaleX:1,scaleY:1},g={...$a,width:d.width,height:d.height,top:d.top,left:d.left,transform:je.Transform.toString(f),transformOrigin:a&&r?Or(r,d):void 0,transition:typeof h=="function"?h(r):h,...c};return B.createElement(n,{className:o,style:g,ref:s},l)}),Qs=t=>s=>{let{active:n,dragOverlay:r}=s;const a={},{styles:l,className:o}=t;if(l!=null&&l.active)for(const[d,c]of Object.entries(l.active))c!==void 0&&(a[d]=n.node.style.getPropertyValue(d),n.node.style.setProperty(d,c));if(l!=null&&l.dragOverlay)for(const[d,c]of Object.entries(l.dragOverlay))c!==void 0&&r.node.style.setProperty(d,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(a))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},Wa=t=>{let{transform:{initial:s,final:n}}=t;return[{transform:je.Transform.toString(s)},{transform:je.Transform.toString(n)}]},Ha={duration:250,easing:"ease",keyframes:Wa,sideEffects:Qs({styles:{active:{opacity:"0"}}})};function Ua(t){let{config:s,draggableNodes:n,droppableContainers:r,measuringConfiguration:a}=t;return jt((l,o)=>{if(s===null)return;const d=n.get(l);if(!d)return;const c=d.node.current;if(!c)return;const u=Xs(o);if(!u)return;const{transform:h}=Y(o).getComputedStyle(o),f=zs(h);if(!f)return;const g=typeof s=="function"?s:Xa(s);return Ws(c,a.draggable.measure),g({active:{id:l,data:d.data,node:c,rect:a.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:a.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:a,transform:f})})}function Xa(t){const{duration:s,easing:n,sideEffects:r,keyframes:a}={...Ha,...t};return l=>{let{active:o,dragOverlay:d,transform:c,...u}=l;if(!s)return;const h={x:d.rect.left-o.rect.left,y:d.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/d.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/d.rect.height:1},g={x:c.x-h.x,y:c.y-h.y,...f},x=a({...u,active:o,dragOverlay:d,transform:{initial:c,final:g}}),[j]=x,m=x[x.length-1];if(JSON.stringify(j)===JSON.stringify(m))return;const b=r?.({active:o,dragOverlay:d,...u}),k=d.node.animate(x,{duration:s,easing:n,fill:"forwards"});return new Promise(D=>{k.onfinish=()=>{b?.(),D()}})}}let ms=0;function Ya(t){return i.useMemo(()=>{if(t!=null)return ms++,ms},[t])}const Ga=B.memo(t=>{let{adjustScale:s=!1,children:n,dropAnimation:r,style:a,transition:l,modifiers:o,wrapperElement:d="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:g,containerNodeRect:x,draggableNodes:j,droppableContainers:m,dragOverlay:b,over:k,measuringConfiguration:D,scrollableAncestors:E,scrollableAncestorRects:w,windowRect:N}=Js(),S=i.useContext(kt),p=Ya(f?.id),C=Ks(o,{activatorEvent:h,active:f,activeNodeRect:g,containerNodeRect:x,draggingNodeRect:b.rect,over:k,overlayNodeRect:b.rect,scrollableAncestors:E,scrollableAncestorRects:w,transform:S,windowRect:N}),T=Ut(g),v=Ua({config:r,draggableNodes:j,droppableContainers:m,measuringConfiguration:D}),A=T?b.setRef:void 0;return B.createElement(Fa,null,B.createElement(Pa,{animation:v},f&&p?B.createElement(qa,{key:p,id:f.id,ref:A,as:d,activatorEvent:h,adjustScale:s,className:c,transition:l,rect:T,style:{zIndex:u,...a},transform:C},n):null))});function Zs(t,s,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(s,1)[0]),r}function Ka(t,s){return t.reduce((n,r,a)=>{const l=s.get(r);return l&&(n[a]=l),n},Array(t.length))}function at(t){return t!==null&&t>=0}function Ja(t,s){if(t===s)return!0;if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==s[n])return!1;return!0}function Qa(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const en=t=>{let{rects:s,activeIndex:n,overIndex:r,index:a}=t;const l=Zs(s,r,n),o=s[a],d=l[a];return!d||!o?null:{x:d.left-o.left,y:d.top-o.top,scaleX:d.width/o.width,scaleY:d.height/o.height}},lt={scaleX:1,scaleY:1},Za=t=>{var s;let{activeIndex:n,activeNodeRect:r,index:a,rects:l,overIndex:o}=t;const d=(s=l[n])!=null?s:r;if(!d)return null;if(a===n){const u=l[o];return u?{x:0,y:n<o?u.top+u.height-(d.top+d.height):u.top-d.top,...lt}:null}const c=el(l,a,n);return a>n&&a<=o?{x:0,y:-d.height-c,...lt}:a<n&&a>=o?{x:0,y:d.height+c,...lt}:{x:0,y:0,...lt}};function el(t,s,n){const r=t[s],a=t[s-1],l=t[s+1];return r?n<s?a?r.top-(a.top+a.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const tn="Sortable",sn=B.createContext({activeIndex:-1,containerId:tn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:en,disabled:{draggable:!1,droppable:!1}});function tl(t){let{children:s,id:n,items:r,strategy:a=en,disabled:l=!1}=t;const{active:o,dragOverlay:d,droppableRects:c,over:u,measureDroppableContainers:h}=Js(),f=Qe(tn,n),g=d.rect!==null,x=i.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),j=o!=null,m=o?x.indexOf(o.id):-1,b=u?x.indexOf(u.id):-1,k=i.useRef(x),D=!Ja(x,k.current),E=b!==-1&&m===-1||D,w=Qa(l);re(()=>{D&&j&&h(x)},[D,x,j,h]),i.useEffect(()=>{k.current=x},[x]);const N=i.useMemo(()=>({activeIndex:m,containerId:f,disabled:w,disableTransforms:E,items:x,overIndex:b,useDragOverlay:g,sortedRects:Ka(x,c),strategy:a}),[m,f,w.draggable,w.droppable,E,x,b,c,g,a]);return B.createElement(sn.Provider,{value:N},s)}const sl=t=>{let{id:s,items:n,activeIndex:r,overIndex:a}=t;return Zs(n,r,a).indexOf(s)},nl=t=>{let{containerId:s,isSorting:n,wasDragging:r,index:a,items:l,newIndex:o,previousItems:d,previousContainerId:c,transition:u}=t;return!u||!r||d!==l&&a===o?!1:n?!0:o!==a&&s===c},rl={duration:200,easing:"ease"},nn="transform",al=je.Transition.toString({property:nn,duration:0,easing:"linear"}),ll={roleDescription:"sortable"};function ol(t){let{disabled:s,index:n,node:r,rect:a}=t;const[l,o]=i.useState(null),d=i.useRef(n);return re(()=>{if(!s&&n!==d.current&&r.current){const c=a.current;if(c){const u=Oe(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&o(h)}}n!==d.current&&(d.current=n)},[s,n,r,a]),i.useEffect(()=>{l&&o(null)},[l]),l}function il(t){let{animateLayoutChanges:s=nl,attributes:n,disabled:r,data:a,getNewIndex:l=sl,id:o,strategy:d,resizeObserverConfig:c,transition:u=rl}=t;const{items:h,containerId:f,activeIndex:g,disabled:x,disableTransforms:j,sortedRects:m,overIndex:b,useDragOverlay:k,strategy:D}=i.useContext(sn),E=cl(r,x),w=h.indexOf(o),N=i.useMemo(()=>({sortable:{containerId:f,index:w,items:h},...a}),[f,a,w,h]),S=i.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:p,node:C,isOver:T,setNodeRef:v}=za({id:o,data:N,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:A,activatorEvent:V,activeNodeRect:z,attributes:K,setNodeRef:q,listeners:Ce,isDragging:J,over:et,setActivatorNodeRef:ce,transform:Le}=_a({id:o,data:N,attributes:{...ll,...n},disabled:E.draggable}),tt=vr(v,q),G=!!A,de=G&&!j&&at(g)&&at(b),Ne=!k&&J,ze=Ne&&de?Le:null,st=de?ze??(d??D)({rects:m,activeNodeRect:z,activeIndex:g,overIndex:b,index:w}):null,xe=at(g)&&at(b)?l({id:o,items:h,activeIndex:g,overIndex:b}):w,ue=A?.id,L=i.useRef({activeId:ue,items:h,newIndex:xe,containerId:f}),Pe=h!==L.current.items,le=s({active:A,containerId:f,isDragging:J,isSorting:G,id:o,index:w,items:h,newIndex:L.current.newIndex,previousItems:L.current.items,previousContainerId:L.current.containerId,transition:u,wasDragging:L.current.activeId!=null}),Se=ol({disabled:!le,index:w,node:C,rect:p});return i.useEffect(()=>{G&&L.current.newIndex!==xe&&(L.current.newIndex=xe),f!==L.current.containerId&&(L.current.containerId=f),h!==L.current.items&&(L.current.items=h)},[G,xe,f,h]),i.useEffect(()=>{if(ue===L.current.activeId)return;if(ue!=null&&L.current.activeId==null){L.current.activeId=ue;return}const ke=setTimeout(()=>{L.current.activeId=ue},50);return()=>clearTimeout(ke)},[ue]),{active:A,activeIndex:g,attributes:K,data:N,rect:p,index:w,newIndex:xe,items:h,isOver:T,isSorting:G,isDragging:J,listeners:Ce,node:C,overIndex:b,over:et,setNodeRef:tt,setActivatorNodeRef:ce,setDroppableNodeRef:v,setDraggableNodeRef:q,transform:Se??st,transition:he()};function he(){if(Se||Pe&&L.current.newIndex===w)return al;if(!(Ne&&!Nt(V)||!u)&&(G||le))return je.Transition.toString({...u,property:nn})}}function cl(t,s){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:s.draggable,droppable:(r=t?.droppable)!=null?r:s.droppable}}function pt(t){if(!t)return!1;const s=t.data.current;return!!(s&&"sortable"in s&&typeof s.sortable=="object"&&"containerId"in s.sortable&&"items"in s.sortable&&"index"in s.sortable)}const dl=[_.Down,_.Right,_.Up,_.Left],ul=(t,s)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:l,over:o,scrollableAncestors:d}}=s;if(dl.includes(t.code)){if(t.preventDefault(),!n||!r)return;const c=[];l.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const g=a.get(f.id);if(g)switch(t.code){case _.Down:r.top<g.top&&c.push(f);break;case _.Up:r.top>g.top&&c.push(f);break;case _.Left:r.left>g.left&&c.push(f);break;case _.Right:r.left<g.left&&c.push(f);break}});const u=Os({collisionRect:r,droppableRects:a,droppableContainers:c});let h=_s(u,"id");if(h===o?.id&&u.length>1&&(h=u[1].id),h!=null){const f=l.get(n.id),g=l.get(h),x=g?a.get(g.id):null,j=g?.node.current;if(j&&x&&f&&g){const b=Ct(j).some((S,p)=>d[p]!==S),k=rn(f,g),D=hl(f,g),E=b||!k?{x:0,y:0}:{x:D?r.width-x.width:0,y:D?r.height-x.height:0},w={x:x.left,y:x.top};return E.x&&E.y?w:Ye(w,E)}}}};function rn(t,s){return!pt(t)||!pt(s)?!1:t.data.current.sortable.containerId===s.data.current.sortable.containerId}function hl(t,s){return!pt(t)||!pt(s)||!rn(t,s)?!1:t.data.current.sortable.index<s.data.current.sortable.index}function fl({id:t,task:s,onDelete:n}){const{attributes:r,listeners:a,setNodeRef:l,transform:o,transition:d,isDragging:c}=il({id:t}),u={transform:je.Transform.toString(o),transition:d,opacity:c?.5:1};return e.jsxs("div",{ref:l,style:u,...r,...a,className:"bg-white p-3 rounded-lg shadow-sm border border-slate-100 flex items-center justify-between group hover:shadow-md transition-all cursor-grab active:cursor-grabbing",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(js,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-slate-700 font-medium",children:s.text})]}),e.jsx("button",{onPointerDown:h=>h.stopPropagation(),onClick:()=>n(s.id),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(As,{className:"w-4 h-4"})})]})}function xl(){const[t,s]=i.useState([]),[n,r]=i.useState(""),[a,l]=i.useState(null),[o,d]=i.useState(!0),[c,u]=i.useState(""),h=Ir(ns(Ht),ns(qt,{coordinateGetter:ul})),f=[{id:"do_first",title:"Do First",subtitle:"Urgent & Important",color:"bg-red-50 border-red-200 text-red-800"},{id:"schedule",title:"Schedule",subtitle:"Not Urgent, Important",color:"bg-blue-50 border-blue-200 text-blue-800"},{id:"delegate",title:"Delegate",subtitle:"Urgent, Not Important",color:"bg-amber-50 border-amber-200 text-amber-800"},{id:"delete",title:"Don't Do",subtitle:"Not Urgent, Not Important",color:"bg-slate-50 border-slate-200 text-slate-800"}];i.useEffect(()=>{g()},[]);async function g(){try{const{data:w,error:N}=await P.from("tasks").select("*").order("created_at",{ascending:!1});if(N)throw N;s(w||[])}catch(w){console.error("Error fetching tasks:",w),u("Could not sync with database. Changes may not be saved.")}finally{d(!1)}}const x=async w=>{if(w.preventDefault(),!n.trim())return;const N=Date.now().toString(),S=n,p={id:N,text:S,quadrant:"do_first"};s(C=>[...C,p]),r("");try{const{data:C,error:T}=await P.from("tasks").insert([{text:S,quadrant:"do_first"}]).select();if(T)throw T;C&&s(v=>v.map(A=>A.id===N?C[0]:A))}catch(C){console.error("Error adding task:",C),u("Failed to save task."),s(T=>T.filter(v=>v.id!==N))}},j=async w=>{const N=[...t];s(t.filter(S=>S.id!==w));try{const{error:S}=await P.from("tasks").delete().eq("id",w);if(S)throw S}catch(S){console.error("Error deleting task:",S),s(N),u("Failed to delete task.")}},m=w=>{if(f.find(S=>S.id===w))return w;const N=t.find(S=>S.id===w);return N?N.quadrant:null},b=w=>{l(w.active.id)},k=w=>{const{active:N,over:S}=w;if(!S)return;const p=N.id,C=S.id,T=m(p),v=m(C);!T||!v||T===v||s(A=>{const V=A.filter(q=>q.quadrant===T),z=A.filter(q=>q.quadrant===v);V.findIndex(q=>q.id===p);const K=z.findIndex(q=>q.id===C);if(C in f.map(q=>q.id))z.length+1;else{const Ce=S&&N.rect.current.translated&&N.rect.current.translated.top>S.rect.top+S.rect.height?1:0;K>=0?K+Ce:z.length+1}return A.map(q=>q.id===p?{...q,quadrant:v}:q)})},D=async w=>{const{active:N,over:S}=w,p=m(N.id),C=m(S?S.id:null);if(p&&C&&p!==C){s(T=>T.map(v=>v.id===N.id?{...v,quadrant:C}:v));try{const{error:T}=await P.from("tasks").update({quadrant:C}).eq("id",N.id);if(T)throw T}catch(T){console.error("Error moving task:",T),u("Failed to save move."),g()}}l(null)},E={sideEffects:Qs({styles:{active:{opacity:"0.5"}}})};return o?e.jsx("div",{className:"flex justify-center p-10",children:e.jsx(Ot,{className:"animate-spin text-teal-600"})}):e.jsxs("div",{className:"space-y-8",children:[c&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg flex items-center gap-2 text-sm",children:[e.jsx(Dn,{className:"w-4 h-4"})," ",c]}),e.jsxs("form",{onSubmit:x,className:"flex gap-4",children:[e.jsx("input",{type:"text",value:n,onChange:w=>r(w.target.value),placeholder:"What's on your mind? (e.g. Email Client X)",className:"flex-1 p-4 border border-slate-200 rounded-xl shadow-sm focus:border-teal-500 outline-none text-lg"}),e.jsxs("button",{type:"submit",className:"bg-teal-600 text-white px-8 py-4 rounded-xl font-bold hover:bg-teal-700 transition-colors flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"})," Add Task"]})]}),e.jsxs(Ra,{sensors:h,collisionDetection:Os,onDragStart:b,onDragOver:k,onDragEnd:D,children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-[600px]",children:f.map(w=>e.jsxs("div",{className:`p-6 rounded-2xl border-2 ${w.color} flex flex-col relative overflow-hidden`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:w.title}),e.jsx("p",{className:"text-sm opacity-70",children:w.subtitle})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:e.jsx(tl,{id:w.id,items:t.filter(N=>N.quadrant===w.id).map(N=>N.id),strategy:Za,children:e.jsxs("div",{className:"space-y-3 min-h-[100px]",children:[t.filter(N=>N.quadrant===w.id).map(N=>e.jsx(fl,{id:N.id,task:N,onDelete:j},N.id)),t.filter(N=>N.quadrant===w.id).length===0&&e.jsx("div",{className:"h-full flex items-center justify-center text-sm opacity-40 italic",children:"Drop tasks here"})]})})})]},w.id))}),e.jsx(Ga,{dropAnimation:E,children:a?e.jsx("div",{className:"bg-white p-3 rounded-lg shadow-xl border border-teal-500 flex items-center justify-between opacity-90 rotate-3 cursor-grabbing w-[300px]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(js,{className:"w-4 h-4 text-teal-500"}),e.jsx("span",{className:"text-slate-900 font-bold",children:t.find(w=>w.id===a)?.text})]})}):null})]})]})}const $=vt.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:40},header:{marginBottom:30,flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:"2px solid #1A565E",paddingBottom:10},logo:{width:150,height:"auto"},title:{fontSize:24,color:"#1A565E",fontWeight:"bold",textTransform:"uppercase"},subtitle:{fontSize:12,color:"#6FA388",marginTop:5},infoSection:{flexDirection:"row",justifyContent:"space-between",marginBottom:20},label:{fontSize:10,color:"#666",marginBottom:2,textTransform:"uppercase"},value:{fontSize:12,color:"#000",fontFamily:"Helvetica-Bold"},table:{display:"table",width:"auto",borderStyle:"solid",borderBottomWidth:1,borderBottomColor:"#eee",marginTop:20},tableRow:{margin:"auto",flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#f0f0f0",minHeight:30,alignItems:"center"},tableHeader:{backgroundColor:"#f0fdf4",borderBottomColor:"#1A565E",borderBottomWidth:1,alignItems:"center",height:24,fontStyle:"bold",flexDirection:"row"},colDate:{width:"20%",paddingLeft:5,fontSize:10},colDesc:{width:"60%",fontSize:10},colDuration:{width:"20%",textAlign:"right",paddingRight:5,fontSize:10},totalSection:{marginTop:20,alignItems:"flex-end"},totalLabel:{fontSize:12,fontWeight:"bold",color:"#666"},totalValue:{fontSize:20,fontWeight:"bold",color:"#1A565E"},footer:{position:"absolute",bottom:30,left:40,right:40,fontSize:10,textAlign:"center",color:"#999",borderTop:"1px solid #eee",paddingTop:10}}),ml=({data:t,logoUrl:s})=>e.jsx(gt,{children:e.jsxs(bt,{size:"A4",style:$.page,children:[e.jsxs(R,{style:$.header,children:[e.jsxs(R,{children:[e.jsx(y,{style:$.title,children:"Timesheet"}),e.jsx(y,{style:$.subtitle,children:"Empower VA Services"})]}),s&&e.jsx(yt,{style:$.logo,src:s})]}),e.jsxs(R,{style:$.infoSection,children:[e.jsxs(R,{children:[e.jsx(y,{style:$.label,children:"Client:"}),e.jsx(y,{style:$.value,children:t.clientName||"Client Name"})]}),e.jsxs(R,{children:[e.jsx(y,{style:$.label,children:"Week Ending:"}),e.jsx(y,{style:$.value,children:new Date().toLocaleDateString()})]})]}),e.jsxs(R,{style:$.tableHeader,children:[e.jsx(y,{style:$.colDate,children:"DATE"}),e.jsx(y,{style:$.colDesc,children:"TASK DESCRIPTION"}),e.jsx(y,{style:$.colDuration,children:"DURATION"})]}),t.entries&&t.entries.map((n,r)=>e.jsxs(R,{style:$.tableRow,children:[e.jsx(y,{style:$.colDate,children:n.date}),e.jsx(y,{style:$.colDesc,children:n.description}),e.jsx(y,{style:$.colDuration,children:n.duration})]},r)),e.jsxs(R,{style:$.totalSection,children:[e.jsx(y,{style:$.totalLabel,children:"TOTAL HOURS"}),e.jsx(y,{style:$.totalValue,children:t.totalHours||"0:00"})]}),e.jsx(R,{style:$.footer,children:e.jsx(y,{children:"Empower VA Services | Operational Architecture | empowervaservices.co.uk"})})]})});function pl(){const[t,s]=i.useState(0),[n,r]=i.useState(!1),[a,l]=i.useState([]),[o,d]=i.useState([]),[c,u]=i.useState(""),[h,f]=i.useState(""),[g,x]=i.useState(""),[j,m]=i.useState(""),[b,k]=i.useState(!1);i.useEffect(()=>{k(!0),D(),E()},[]),i.useEffect(()=>{let v;return n?v=setInterval(()=>{s(A=>A+1)},1e3):!n&&t!==0&&clearInterval(v),()=>clearInterval(v)},[n,t]);const D=async()=>{const{data:v,error:A}=await P.from("clients").select("id, name").order("name");v&&d(v)},E=async()=>{const{data:v,error:A}=await P.from("time_entries").select(`
                *,
                clients (name)
            `).order("created_at",{ascending:!1});if(v){const V=v.map(z=>({id:z.id,date:z.date,description:z.description,duration:z.duration,clientName:z.clients?.name||"No Client"}));l(V)}},w=v=>{const A=Math.floor(v/3600),V=Math.floor(v%3600/60),z=v%60;return`${A.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`},N=async()=>{if(r(!1),c){const v=w(t);await p(v,c,h),s(0),u("")}},S=async()=>{g&&j&&(await p(j,g,h),x(""),m(""))},p=async(v,A,V)=>{const{error:z}=await P.from("time_entries").insert([{description:A,duration:v,client_id:V||null,date:new Date().toLocaleDateString()}]);z?(console.error(z),alert("Failed to save entry")):E()},C=async v=>{const{error:A}=await P.from("time_entries").delete().eq("id",v);A||l(a.filter(V=>V.id!==v))},T=()=>{const v=o.find(A=>A.id===h);return v?v.name:""};return e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 rounded-2xl shadow-lg flex flex-col lg:flex-row items-center justify-between gap-6",children:[e.jsx("div",{className:"flex-1 w-full space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-400 uppercase font-bold mb-2 block",children:"Current Task"}),e.jsx("input",{type:"text",value:c,onChange:v=>u(v.target.value),placeholder:"What are you working on?",className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:border-teal-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-400 uppercase font-bold mb-2 block",children:"Client"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-3 w-4 h-4 text-slate-500"}),e.jsxs("select",{value:h,onChange:v=>f(v.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 pl-10 text-white focus:border-teal-500 outline-none appearance-none",children:[e.jsx("option",{value:"",children:"-- No Client --"}),o.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]})]})]})}),e.jsx("div",{className:"font-mono text-5xl font-bold tracking-wider text-teal-400",children:w(t)}),e.jsx("div",{className:"flex gap-4",children:n?e.jsx("button",{onClick:N,className:"bg-red-500 hover:bg-red-400 text-white p-4 rounded-full transition-all hover:scale-110 shadow-lg shadow-red-900/50",children:e.jsx(lr,{className:"w-6 h-6 fill-current"})}):e.jsx("button",{onClick:()=>r(!0),className:"bg-teal-600 hover:bg-teal-500 text-white p-4 rounded-full transition-all hover:scale-110 shadow-lg shadow-teal-900/50",children:e.jsx(ks,{className:"w-6 h-6 fill-current"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(dt,{className:"w-4 h-4 text-teal-600"})," Manual Entry"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{value:g,onChange:v=>x(v.target.value),type:"text",placeholder:"Task Description",className:"w-full p-3 border border-slate-200 rounded-lg text-sm outline-none focus:border-teal-500"}),e.jsx("input",{value:j,onChange:v=>m(v.target.value),type:"text",placeholder:"Duration (e.g. 01:30:00)",className:"w-full p-3 border border-slate-200 rounded-lg text-sm outline-none focus:border-teal-500"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Will use Client selected above."}),e.jsxs("button",{onClick:S,className:"w-full bg-slate-900 text-white font-bold py-3 rounded-lg hover:bg-slate-800 transition-all flex items-center justify-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"})," Add Entry"]})]})]}),e.jsxs("div",{className:"bg-teal-50 p-6 rounded-xl border border-teal-100",children:[e.jsx("h3",{className:"font-bold text-teal-800 mb-4",children:"Export Timesheet"}),e.jsxs("p",{className:"text-sm text-teal-700 mb-4",children:["Exporting for: ",e.jsx("strong",{children:T()||"Select a Client above"})]}),b&&a.length>0&&h?e.jsx(bs,{document:e.jsx(ml,{data:{clientName:T(),entries:a.filter(v=>v.clientName===T()),totalHours:"Calculated in PDF"},logoUrl:window.location.origin+"/logo.png"}),fileName:`Timesheet_${T()}.pdf`,className:"flex items-center justify-center gap-2 bg-teal-700 text-white py-3 rounded-lg font-bold hover:bg-teal-800 w-full shadow-sm transition-all",children:({loading:v})=>v?"Generating...":e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"w-4 h-4"})," Download PDF"]})}):e.jsx("button",{disabled:!0,className:"w-full bg-slate-200 text-slate-400 py-3 rounded-lg font-bold cursor-not-allowed",children:"Select Client to Export"})]})]}),e.jsxs("div",{className:"md:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 font-bold text-slate-600 flex justify-between items-center",children:[e.jsx("span",{children:"Task Log"}),e.jsxs("span",{className:"text-xs bg-slate-200 px-2 py-1 rounded text-slate-600",children:[a.length," Entries"]})]}),e.jsx("div",{className:"divide-y divide-slate-100 max-h-[500px] overflow-y-auto",children:a.length===0?e.jsxs("div",{className:"p-12 text-center flex flex-col items-center justify-center text-slate-400 italic gap-4",children:[e.jsx(dt,{className:"w-8 h-8 opacity-20"}),"No time logged yet. Start the timer!"]}):a.map(v=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors group",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:v.description}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[e.jsx("span",{children:v.date}),v.clientName!=="No Client"&&e.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide",children:v.clientName})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-mono font-bold text-teal-600 bg-teal-50 px-3 py-1 rounded-lg border border-teal-100",children:v.duration}),e.jsx("button",{onClick:()=>C(v.id),className:"text-slate-300 hover:text-red-500 transition-colors p-2 hover:bg-red-50 rounded-full",children:e.jsx(As,{className:"w-4 h-4"})})]})]},v.id))})]})]})]})}const M=vt.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:40},header:{marginBottom:30,flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:"2px solid #1A565E",paddingBottom:10},logo:{width:150,height:"auto"},title:{fontSize:24,color:"#1A565E",fontWeight:"bold",textTransform:"uppercase"},subtitle:{fontSize:12,color:"#6FA388",marginTop:5},section:{marginBottom:20,padding:15,backgroundColor:"#f8fafc",borderRadius:5},sectionTitle:{fontSize:14,color:"#1A565E",fontWeight:"bold",marginBottom:10,borderBottom:"1px solid #e2e8f0",paddingBottom:5},row:{flexDirection:"row",marginBottom:8},label:{width:"30%",fontSize:10,color:"#64748b",fontWeight:"bold",textTransform:"uppercase"},value:{width:"70%",fontSize:11,color:"#334155"},footer:{position:"absolute",bottom:30,left:40,right:40,fontSize:10,textAlign:"center",color:"#999",borderTop:"1px solid #eee",paddingTop:10}}),gl=({data:t,logoUrl:s})=>e.jsx(gt,{children:e.jsxs(bt,{size:"A4",style:M.page,children:[e.jsxs(R,{style:M.header,children:[e.jsxs(R,{children:[e.jsx(y,{style:M.title,children:"Client Dossier"}),e.jsx(y,{style:M.subtitle,children:"Confidential Client Profile"})]}),s&&e.jsx(yt,{style:M.logo,src:s})]}),e.jsxs(R,{style:M.section,children:[e.jsx(y,{style:M.sectionTitle,children:"Core Identity"}),e.jsxs(R,{style:M.row,children:[e.jsx(y,{style:M.label,children:"Client Name:"}),e.jsx(y,{style:M.value,children:t.clientName})]}),e.jsxs(R,{style:M.row,children:[e.jsx(y,{style:M.label,children:"Business Name:"}),e.jsx(y,{style:M.value,children:t.businessName})]}),e.jsxs(R,{style:M.row,children:[e.jsx(y,{style:M.label,children:"Email:"}),e.jsx(y,{style:M.value,children:t.email})]})]}),e.jsxs(R,{style:M.section,children:[e.jsx(y,{style:M.sectionTitle,children:"Brand Identity"}),e.jsxs(R,{style:M.row,children:[e.jsx(y,{style:M.label,children:"Brand Colors:"}),e.jsx(y,{style:M.value,children:t.brandColors})]}),e.jsxs(R,{style:M.row,children:[e.jsx(y,{style:M.label,children:"Fonts:"}),e.jsx(y,{style:M.value,children:t.fonts})]}),e.jsxs(R,{style:M.row,children:[e.jsx(y,{style:M.label,children:"Tone of Voice:"}),e.jsx(y,{style:M.value,children:t.toneOfVoice})]})]}),e.jsxs(R,{style:M.section,children:[e.jsx(y,{style:M.sectionTitle,children:"Access & Logistics"}),e.jsxs(R,{style:M.row,children:[e.jsx(y,{style:M.label,children:"Communication:"}),e.jsx(y,{style:M.value,children:t.communicationPref})]}),e.jsxs(R,{style:M.row,children:[e.jsx(y,{style:M.label,children:"Key Tools:"}),e.jsx(y,{style:M.value,children:t.tools})]}),e.jsxs(R,{style:M.row,children:[e.jsx(y,{style:M.label,children:"Notes:"}),e.jsx(y,{style:M.value,children:t.notes})]})]}),e.jsx(R,{style:M.footer,children:e.jsx(y,{children:"Empower VA Services | Operational Architecture | empowervaservices.co.uk"})})]})}),bl=({data:t})=>{const[s]=mn({document:e.jsx(gl,{data:t,logoUrl:window.location.origin+"/logo.png"})});return s.loading?e.jsx("button",{disabled:!0,className:"flex items-center justify-center gap-2 bg-slate-900/50 text-white py-4 rounded-xl font-bold w-full shadow-lg cursor-wait",children:"Preparing PDF..."}):s.error?e.jsxs("div",{className:"text-red-500 text-sm text-center font-bold p-2",children:["Formatting Error: ",s.error]}):e.jsxs("a",{href:s.url,download:`Dossier_${t.clientName||"Client"}.pdf`,className:"flex items-center justify-center gap-2 bg-slate-800 text-white py-4 rounded-xl font-bold hover:bg-slate-700 w-full shadow-lg transition-all",children:[e.jsx(it,{className:"w-4 h-4"})," Download PDF Only"]})};function vl(){const[t,s]=i.useState(1),[n,r]=i.useState(!1),[a,l]=i.useState("idle"),[o,d]=i.useState({clientName:"",businessName:"",email:"",brandColors:"",fonts:"",toneOfVoice:"",communicationPref:"Email",tools:"",notes:""});i.useEffect(()=>{r(!0)},[]);const c=x=>{d({...o,[x.target.name]:x.target.value})},u=()=>s(t+1),h=()=>s(t-1),f=async()=>{l("saving");const x=o.businessName||o.clientName||"Unnamed Client",{data:j,error:m}=await P.from("clients").insert([{name:x,first_name:o.clientName,email:o.email,brand_colors:o.brandColors,fonts:o.fonts,tone_of_voice:o.toneOfVoice,communication_pref:o.communicationPref,tools:o.tools,notes:o.notes,status:"Onboarding",scope_of_work:"Drafted via Onboarding Engine",address:"Pending"}]).select();m?(console.error(m),l("error")):l("saved")},g=()=>{switch(t){case 1:return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"bg-teal-50/50 p-4 rounded-xl border border-teal-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-teal-900 flex items-center gap-2 mb-1",children:[e.jsx(Bt,{className:"w-5 h-5 text-teal-600"})," Core Identity"]}),e.jsx("p",{className:"text-sm text-teal-700",children:"Who is this client? The basics."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",name:"clientName",placeholder:"Contact Name (e.g. Sarah Jones)",value:o.clientName,onChange:c,className:"w-full p-4 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl text-slate-900 placeholder:text-slate-400 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all shadow-sm"}),e.jsx("input",{type:"text",name:"businessName",placeholder:"Business Name (e.g. Acme Corp)",value:o.businessName,onChange:c,className:"w-full p-4 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl text-slate-900 placeholder:text-slate-400 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all shadow-sm"}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:o.email,onChange:c,className:"w-full p-4 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl text-slate-900 placeholder:text-slate-400 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all shadow-sm"})]})]});case 2:return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"bg-purple-50/50 p-4 rounded-xl border border-purple-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 flex items-center gap-2 mb-1",children:[e.jsx(Ss,{className:"w-5 h-5 text-purple-600"})," Brand Identity"]}),e.jsx("p",{className:"text-sm text-purple-700",children:"Define the look and feel."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",name:"brandColors",placeholder:"Brand Colors (Hex Codes, e.g. #FF5733)",value:o.brandColors,onChange:c,className:"w-full p-4 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl text-slate-900 placeholder:text-slate-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition-all shadow-sm"}),e.jsx("input",{type:"text",name:"fonts",placeholder:"Fonts (e.g. Inter, Playfair Display)",value:o.fonts,onChange:c,className:"w-full p-4 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl text-slate-900 placeholder:text-slate-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition-all shadow-sm"}),e.jsx("textarea",{name:"toneOfVoice",placeholder:"Tone of Voice (e.g. Professional, Witty, Casual)",value:o.toneOfVoice,onChange:c,className:"w-full p-4 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl text-slate-900 placeholder:text-slate-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition-all shadow-sm h-32 resize-none"})]})]});case 3:return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-xl border border-amber-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-amber-900 flex items-center gap-2 mb-1",children:[e.jsx(Fn,{className:"w-5 h-5 text-amber-600"})," Access & Logistics"]}),e.jsx("p",{className:"text-sm text-amber-700",children:"How will we work together?"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase ml-1 mb-1 block",children:"Communication Pref"}),e.jsxs("select",{name:"communicationPref",value:o.communicationPref,onChange:c,className:"w-full p-4 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl text-slate-900 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none transition-all shadow-sm appearance-none",children:[e.jsx("option",{children:"Email"}),e.jsx("option",{children:"Slack"}),e.jsx("option",{children:"WhatsApp"}),e.jsx("option",{children:"Zoom"})]})]}),e.jsx("input",{type:"text",name:"tools",placeholder:"Key Tools (e.g. Notion, Asana, WordPress)",value:o.tools,onChange:c,className:"w-full p-4 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl text-slate-900 placeholder:text-slate-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none transition-all shadow-sm"}),e.jsx("textarea",{name:"notes",placeholder:"Additional Notes / Passwords (stored locally initially)",value:o.notes,onChange:c,className:"w-full p-4 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl text-slate-900 placeholder:text-slate-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none transition-all shadow-sm h-32 resize-none"})]})]});default:return null}};return e.jsxs("div",{className:"flex flex-col xl:flex-row gap-8 h-full",children:[e.jsxs("div",{className:"w-full xl:w-2/3 glass-card p-8 rounded-3xl border border-white/20 shadow-xl flex flex-col relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-teal-400/10 rounded-full blur-3xl -mr-32 -mt-32 pointer-events-none"}),e.jsx("div",{className:"flex items-center gap-3 mb-10 relative z-10",children:[1,2,3].map(x=>e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${t>=x?"bg-gradient-to-r from-teal-400 to-teal-500 shadow-lg shadow-teal-500/30":"bg-slate-200/50"}`}),e.jsx("div",{className:`text-xs font-bold mt-2 text-center transition-colors ${t>=x?"text-teal-600":"text-slate-300"}`,children:x===1?"Identity":x===2?"Brand":"Access"})]},x))}),e.jsx("div",{className:"flex-1 relative z-10",children:g()}),e.jsxs("div",{className:"flex justify-between mt-10 pt-6 border-t border-slate-100/50 relative z-10",children:[t>1?e.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-slate-500 font-bold hover:text-slate-800 px-4 py-2 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsx(Nn,{className:"w-4 h-4"})," Back"]}):e.jsx("div",{}),t<3?e.jsxs("button",{onClick:u,className:"flex items-center gap-2 bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-800 shadow-lg hover:shadow-xl transition-all hover:-translate-y-0.5",children:["Next Step ",e.jsx(wn,{className:"w-4 h-4"})]}):e.jsxs("div",{className:"text-teal-600 font-bold flex items-center gap-2 bg-teal-50 px-4 py-2 rounded-lg border border-teal-100",children:[e.jsx(_t,{className:"w-5 h-5"})," Ready for Review"]})]})]}),e.jsxs("div",{className:"w-full xl:w-1/3 flex flex-col gap-6",children:[e.jsxs("div",{className:"glass-card p-8 rounded-3xl border border-white/20 text-center shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-white to-transparent opacity-50 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-400 to-emerald-500 rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg shadow-teal-500/30",children:e.jsx(Tn,{className:"w-8 h-8 text-white"})}),e.jsx("h4",{className:"font-bold text-slate-800 text-xl mb-2",children:"Smart CRM Entry"}),e.jsx("p",{className:"text-sm text-slate-500 mb-8 leading-relaxed",children:"Once approved, this will create a permanent Record in Supabase and generate a stylized PDF dossier."}),n&&t===3?e.jsxs("div",{className:"space-y-4 animate-in fade-in zoom-in duration-300",children:[a==="saved"?e.jsxs("div",{className:"bg-green-100 text-green-700 p-4 rounded-xl font-bold flex items-center justify-center gap-2 border border-green-200 shadow-sm",children:[e.jsx(_t,{className:"w-5 h-5"})," Saved to CRM!"]}):e.jsx("button",{onClick:f,disabled:a==="saving",className:"flex items-center justify-center gap-2 bg-gradient-to-r from-teal-600 to-teal-500 text-white py-4 rounded-xl font-bold hover:from-teal-500 hover:to-teal-400 w-full shadow-xl shadow-teal-500/20 transition-all hover:scale-[1.02] disabled:opacity-70 disabled:hover:scale-100",children:a==="saving"?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(Ds,{className:"w-5 h-5"})," Create Client Record"]})}),e.jsxs("div",{className:"relative flex py-2 items-center",children:[e.jsx("div",{className:"flex-grow border-t border-slate-200"}),e.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs uppercase font-bold tracking-wider",children:"Downloads"}),e.jsx("div",{className:"flex-grow border-t border-slate-200"})]}),e.jsx(bl,{data:o})]}):e.jsx("div",{className:"bg-slate-100/50 rounded-xl p-6 border border-slate-200 border-dashed",children:e.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Complete all 3 steps to unlock CRM actions."})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-3xl shadow-lg text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 blur-2xl pointer-events-none"}),e.jsxs("h4",{className:"font-bold mb-2 text-sm uppercase tracking-wider opacity-80 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})," Pro Tip"]}),e.jsxs("p",{className:"text-sm opacity-90 leading-relaxed",children:['Saving creates a "Client Profile" where you can then add ',e.jsx("strong",{children:"Vault Passwords"})," and upload ",e.jsx("strong",{children:"Assets"})," separately in the Client Detail view."]})]})]})]})}class ps extends B.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){console.error("Uncaught error:",s,n),this.setState({errorInfo:n})}render(){return this.state.hasError?e.jsxs("div",{className:"p-6 m-4 bg-red-50 border border-red-200 rounded-xl text-red-900 font-mono text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-red-600 font-bold text-lg",children:[e.jsx(cr,{className:"w-6 h-6"}),"Runtime Error"]}),e.jsx("div",{className:"font-bold mb-2",children:this.state.error?.toString()}),e.jsx("details",{className:"whitespace-pre-wrap opacity-70",children:this.state.errorInfo?.componentStack})]}):this.props.children}}function yl({children:t}){const[s,n]=i.useState(null),[r,a]=i.useState(!0),[l,o]=i.useState(""),[d,c]=i.useState(""),[u,h]=i.useState(""),[f,g]=i.useState(!1);i.useEffect(()=>{console.log("AdminGate mounted. Checking session...");try{P.auth.getSession().then(({data:{session:m},error:b})=>{b&&console.error("Supabase Session Error:",b),console.log("AdminGate initial session:",m),n(m),a(!1)});const{data:{subscription:j}}=P.auth.onAuthStateChange((m,b)=>{console.log("AdminGate auth change:",m,b),n(b)});return()=>j.unsubscribe()}catch(j){console.error("AdminGate Supabase Crash:",j),a(!1)}},[]);const x=async j=>{j.preventDefault(),g(!0),h("");try{const{error:m}=await P.auth.signInWithPassword({email:l,password:d});m&&(console.error("Login flow error:",m),h(m.message),g(!1))}catch(m){console.error("Login fatal error:",m),h("System Error: "+m.message),g(!1)}};return r?e.jsx("div",{className:"min-h-[600px] flex items-center justify-center bg-slate-50",children:e.jsx(Ot,{className:"w-8 h-8 text-teal-600 animate-spin"})}):s?e.jsx(ps,{children:t}):e.jsx(ps,{children:e.jsx("div",{className:"min-h-[600px] flex items-center justify-center bg-slate-50 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-200",children:[e.jsxs("div",{className:"bg-slate-900 p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-teal-500/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:e.jsx(Ns,{className:"w-8 h-8 text-teal-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Admin Access"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Empower VA Command Center"})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:l,onChange:j=>o(j.target.value),placeholder:"name@empowerva.co.uk",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500/20 transition-all font-medium",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Password"}),e.jsx("input",{type:"password",value:d,onChange:j=>c(j.target.value),placeholder:"••••••••",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500/20 transition-all font-medium",required:!0})]}),u&&e.jsxs("div",{className:"text-red-600 text-sm text-center font-bold bg-red-50 p-3 rounded-lg border border-red-100 flex items-center justify-center gap-2",children:[e.jsx(bn,{className:"w-4 h-4"})," ",u]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-slate-900 text-white py-4 rounded-xl font-bold hover:bg-slate-800 transition-all flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Ot,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):e.jsxs(e.Fragment,{children:["Login ",e.jsx(ct,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]}),e.jsx("div",{className:"mt-8 text-center space-y-4",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-xs text-slate-400 bg-slate-50 px-3 py-1 rounded-full border border-slate-100",children:[e.jsx(Ts,{className:"w-3 h-3"}),"Supabase Secured™"]})})]})]})})})}const Re=({icon:t,active:s,onClick:n,title:r})=>e.jsxs("button",{onClick:n,title:r,className:`w-16 h-16 flex items-center justify-center rounded-xl transition-all duration-200 relative group
        ${s?"bg-white/70 text-brand-lilac-dark":"text-slate-700 hover:bg-white/40"}`,children:[e.jsx(t,{className:`w-6 h-6 ${s?"text-brand-lilac-dark":""}`}),s&&e.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-3/5 w-1 bg-brand-lilac rounded-r-md"}),e.jsx("span",{className:"absolute left-full ml-3 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:r})]});function wl({activeTab:t,onTabChange:s}){return e.jsxs("nav",{className:"glass-sidebar w-20 flex flex-col items-center shrink-0 h-full py-6 space-y-6 z-20",children:[e.jsx("div",{className:"w-12 h-12 bg-brand-lilac rounded-xl flex items-center justify-center shadow-lg mb-4",children:e.jsx(ts,{className:"text-white w-6 h-6"})}),e.jsxs("div",{className:"flex flex-col space-y-4 items-center w-full",children:[e.jsx(Re,{icon:Wn,title:"Dashboard",active:t==="dashboard",onClick:()=>s("dashboard")}),e.jsx(Re,{icon:xr,title:"Clients",active:t==="clients",onClick:()=>s("clients")}),e.jsx(Re,{icon:_t,title:"Tasks",active:t==="triage",onClick:()=>s("triage")}),e.jsx(Re,{icon:dt,title:"Time Tracker",active:t==="timekeeper",onClick:()=>s("timekeeper")}),e.jsx(Re,{icon:vs,title:"Documents",active:t==="proposal"||t==="contract"||t==="invoice"||t==="documents",onClick:()=>s("documents")}),e.jsx(Re,{icon:ts,title:"Onboarding",active:t==="onboarding",onClick:()=>s("onboarding")})]}),e.jsx("div",{className:"mt-auto",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-white shadow-md bg-purple-200 flex items-center justify-center text-purple-700 font-bold",children:"VA"})})]})}function jl({onClose:t,onSuccess:s}){const[n,r]=i.useState(!1),[a,l]=i.useState([]),[o,d]=i.useState({title:"",start_time:"",duration_minutes:60,client_id:"",color:"blue"});i.useEffect(()=>{(async()=>{const{data:h}=await P.from("clients").select("id, name");h&&l(h)})()},[]);const c=async u=>{u.preventDefault(),r(!0);const{error:h}=await P.from("schedule").insert([{...o,client_id:o.client_id||null}]);r(!1),h?(console.error("Error adding event:",h),alert("Failed to add event")):s()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-fade-in-up",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"Add Schedule Event"}),e.jsx("button",{onClick:t,children:e.jsx(ys,{className:"w-5 h-5 text-slate-400 hover:text-slate-600"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 uppercase",children:"Event Title"}),e.jsx("input",{type:"text",required:!0,value:o.title,onChange:u=>d({...o,title:u.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 bg-white",placeholder:"e.g. Client Call"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 uppercase",children:"Start Time"}),e.jsx("input",{type:"datetime-local",required:!0,value:o.start_time,onChange:u=>d({...o,start_time:u.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 uppercase",children:"Duration (mins)"}),e.jsx("input",{type:"number",required:!0,value:o.duration_minutes,onChange:u=>d({...o,duration_minutes:u.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 bg-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 uppercase",children:"Link Client (Optional)"}),e.jsxs("select",{value:o.client_id,onChange:u=>d({...o,client_id:u.target.value}),className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 bg-white",children:[e.jsx("option",{value:"",children:"No Client Linked"}),a.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2 uppercase",children:"Color Tag"}),e.jsx("div",{className:"flex gap-3",children:["blue","green","lilac","orange"].map(u=>e.jsx("button",{type:"button",onClick:()=>d({...o,color:u}),className:`w-8 h-8 rounded-full border-2 transition-all ${o.color===u?"border-slate-600 scale-110":"border-transparent opacity-60 hover:opacity-100"} ${u==="blue"?"bg-blue-400":u==="green"?"bg-green-400":u==="lilac"?"bg-brand-lilac":"bg-orange-400"}`},u))})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 font-bold text-slate-500 hover:bg-slate-100 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-brand-lilac text-white font-bold rounded-lg hover:bg-brand-lilac-hover shadow-lg disabled:opacity-50",children:n?"Saving...":"Add Event"})]})]})]})})}function an({onClose:t,onSuccess:s}){const[n,r]=i.useState(!1),[a,l]=i.useState({name:"",status:"Active",email:"",phone:"",address:"",hourly_rate:"",scope_of_work:"",notes:""}),o=c=>{l({...a,[c.target.name]:c.target.value})},d=async c=>{c.preventDefault(),r(!0);const{error:u}=await P.from("clients").insert([a]);r(!1),u?(console.error("Error adding client:",u),alert("Failed to add client. Check console for details.")):s()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Add New Client"}),e.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:e.jsx(ys,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Client / Company Name *"}),e.jsx("input",{type:"text",name:"name",required:!0,value:a.name,onChange:o,className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 placeholder:text-slate-400 bg-white",placeholder:"e.g. Acme Corp"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Status"}),e.jsxs("select",{name:"status",value:a.status,onChange:o,className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 bg-white",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Lead",children:"Lead"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:o,className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 placeholder:text-slate-400 bg-white",placeholder:"contact@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:o,className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 placeholder:text-slate-400 bg-white",placeholder:"+44 7700 900000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Billing Address"}),e.jsx("textarea",{name:"address",rows:"2",value:a.address,onChange:o,className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 placeholder:text-slate-400 bg-white",placeholder:"Full invoice address..."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Hourly Rate (£)"}),e.jsx("input",{type:"number",name:"hourly_rate",value:a.hourly_rate,onChange:o,className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 placeholder:text-slate-400 bg-white",placeholder:"30.00"})]})}),e.jsxs("div",{className:"bg-brand-lilac/5 p-6 rounded-xl border border-brand-lilac/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-brand-lilac font-bold",children:[e.jsx(Es,{className:"w-5 h-5"}),e.jsx("h3",{children:"The Scope Guard"})]}),e.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Define exactly what IS and IS NOT included. This will differ from client requests later to prevent scope creep."}),e.jsx("textarea",{name:"scope_of_work",rows:"4",value:a.scope_of_work,onChange:o,className:"w-full p-3 border border-brand-lilac/30 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none bg-white text-slate-900 placeholder:text-slate-400",placeholder:`- Email Management (Inbox Zero only)
- Social Media (3 posts/week)
- NO weekend support
- NO web development`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Internal Notes"}),e.jsx("textarea",{name:"notes",rows:"2",value:a.notes,onChange:o,className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-lilac outline-none text-slate-900 placeholder:text-slate-400 bg-white",placeholder:"Private notes about this client..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[e.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 rounded-lg font-bold text-slate-500 hover:bg-slate-100 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-8 py-3 rounded-lg font-bold text-white bg-brand-lilac hover:bg-brand-lilac-hover shadow-lg transition-all flex items-center gap-2",children:n?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(Ds,{className:"w-4 h-4"})," Save Client"]})})]})]})]})})}function Nl({onNavigate:t}){const[s,n]=i.useState(!0),[r,a]=i.useState([]),[l,o]=i.useState([]),[d,c]=i.useState([]),[u,h]=i.useState(!1),[f,g]=i.useState(!1);i.useEffect(()=>{x()},[]);const x=async()=>{n(!0);const{data:m}=await P.from("schedule").select("*").gte("start_time",new Date().toISOString().split("T")[0]).order("start_time",{ascending:!0}).limit(5),{data:b}=await P.from("clients").select("id, name, status, hourly_rate").order("created_at",{ascending:!1}).limit(3),{data:k}=await P.from("tasks").select("*, clients(name)").eq("quadrant","do_first").limit(4);m&&a(m),b&&o(b),k&&c(k),n(!1)},j=m=>new Date(m).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"mb-8 animate-fade-in-up flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-extrabold text-slate-800",children:"Main Hub"}),e.jsx("p",{className:"text-lg text-slate-600",children:"Welcome back, let's get productive."})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-2xl font-bold text-brand-lilac",children:new Date().toLocaleDateString("en-GB",{weekday:"long"})}),e.jsx("p",{className:"text-slate-400",children:new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass-card rounded-2xl p-6 md:col-span-2 relative group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(vn,{className:"w-5 h-5 text-brand-lilac"})," Schedule"]}),e.jsx("button",{onClick:()=>h(!0),className:"bg-brand-lilac/10 text-brand-lilac hover:bg-brand-lilac hover:text-white p-2 rounded-lg transition-all",children:e.jsx(we,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"space-y-3 min-h-[150px]",children:s?e.jsx("div",{className:"flex items-center justify-center h-32 text-slate-400",children:"Loading schedule..."}):r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-32 border-2 border-dashed border-slate-200 rounded-xl text-slate-400",children:[e.jsx(dt,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{children:"No events scheduled."}),e.jsx("button",{onClick:()=>h(!0),className:"text-brand-lilac font-bold text-sm hover:underline mt-1",children:"Add Event"})]}):r.map(m=>e.jsxs("div",{className:"flex items-center gap-4 group/item cursor-pointer hover:bg-white/60 p-3 rounded-xl transition-all border border-transparent hover:border-white hover:shadow-sm",children:[e.jsxs("div",{className:"text-center min-w-[60px]",children:[e.jsx("span",{className:"block text-sm font-bold text-slate-700",children:j(m.start_time)}),e.jsx("span",{className:"text-xs text-slate-400 uppercase",children:new Date(m.start_time).toLocaleDateString("en-GB",{weekday:"short"})})]}),e.jsx("div",{className:`h-10 w-1.5 rounded-full ${m.color==="green"?"bg-green-400":m.color==="blue"?"bg-blue-400":m.color==="orange"?"bg-orange-400":"bg-brand-lilac"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800",children:m.title}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:[m.duration_minutes," mins"]})]})]},m.id))})]}),e.jsx("div",{className:"glass-card rounded-2xl p-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("button",{onClick:()=>t("timekeeper"),className:"bg-brand-lilac text-white font-medium py-3 px-4 rounded-xl shadow-lg hover:bg-brand-lilac-hover hover:scale-[1.02] transition-all flex items-center justify-center gap-2 group",children:[e.jsx(ks,{className:"w-5 h-5 fill-current"}),e.jsx("span",{children:"Start Time Tracker"})]}),e.jsxs("button",{onClick:()=>t("triage"),className:"bg-white text-slate-700 border border-slate-200 font-medium py-3 px-4 rounded-xl hover:bg-slate-50 hover:border-brand-lilac transition-all flex items-center justify-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"}),e.jsx("span",{children:"Add New Task"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"bg-white text-slate-700 border border-slate-200 font-medium py-3 px-4 rounded-xl hover:bg-slate-50 hover:border-brand-lilac transition-all flex items-center justify-center gap-2",children:[e.jsx(ur,{className:"w-5 h-5"}),e.jsx("span",{children:"Add New Client"})]})]})]})}),e.jsxs("div",{className:"glass-card rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Recent Clients"}),e.jsx("div",{className:"space-y-3",children:s?e.jsx("div",{className:"text-center text-slate-400 py-4",children:"Loading..."}):l.length===0?e.jsx("div",{className:"text-center text-slate-400 py-4 text-sm",children:"No clients yet."}):l.map(m=>e.jsxs("div",{onClick:()=>t("clients"),className:"flex items-center gap-3 p-2 rounded-lg hover:bg-white/50 cursor-pointer transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 font-bold group-hover:bg-brand-lilac group-hover:text-white transition-colors",children:m.name.substring(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-slate-700 group-hover:text-brand-lilac transition-colors",children:m.name}),e.jsxs("div",{className:"text-xs text-slate-500",children:[m.status," • £",m.hourly_rate,"/hr"]})]}),e.jsx(ct,{className:"w-4 h-4 text-slate-300 group-hover:text-brand-lilac opacity-0 group-hover:opacity-100 transition-all"})]},m.id))})]}),e.jsxs("div",{className:"glass-card rounded-2xl p-6 md:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(rr,{className:"w-5 h-5 text-brand-lilac"})," Priority Tasks"]}),e.jsxs("button",{onClick:()=>t("triage"),className:"text-sm font-bold text-brand-lilac hover:underline flex items-center gap-1",children:["View All ",e.jsx(ct,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"space-y-3",children:s?e.jsx("div",{className:"text-center text-slate-400 py-8",children:"Loading tasks..."}):d.length===0?e.jsx("div",{className:"text-center text-slate-400 py-8 text-sm",children:"No urgent tasks! 🎉"}):d.map(m=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-white/30 border border-white/20 hover:bg-white/60 transition-colors",children:[e.jsx("div",{className:"mt-1 w-5 h-5 rounded border-2 border-brand-lilac flex items-center justify-center"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-700",children:m.text}),m.clients&&e.jsx("span",{className:"text-xs font-bold text-brand-lilac-dark bg-brand-lilac/10 py-0.5 px-2 rounded-full mt-1 inline-block",children:m.clients.name})]})]},m.id))})]})]}),u&&e.jsx(jl,{onClose:()=>h(!1),onSuccess:()=>{h(!1),x()}}),f&&e.jsx(an,{onClose:()=>g(!1),onSuccess:()=>{g(!1),x()}})]})}function Cl({client:t,onBack:s}){const[n,r]=i.useState("tasks"),[a,l]=i.useState([]),[o,d]=i.useState(""),[c,u]=i.useState([]),[h,f]=i.useState([]),[g,x]=i.useState(!1),[j,m]=i.useState({title:"",username:"",password:"",url:""});i.useEffect(()=>{b(),D(),w()},[t.id]);const b=async()=>{const{data:p}=await P.from("tasks").select("*").eq("client_id",t.id).order("created_at",{ascending:!1});p&&l(p)},k=async p=>{if(p.preventDefault(),!o.trim())return;const{error:C}=await P.from("tasks").insert([{text:o,client_id:t.id,quadrant:"do_first"}]);C||(d(""),b())},D=async()=>{const{data:p}=await P.from("vault_items").select("*").eq("client_id",t.id);p&&u(p)},E=async p=>{p.preventDefault();const{error:C}=await P.from("vault_items").insert([{...j,client_id:t.id}]);C||(m({title:"",username:"",password:"",url:""}),x(!1),D())},w=async()=>{const{data:p}=await P.from("assets").select("*").eq("client_id",t.id);p&&f(p)},N=async p=>{const C=p.target.files[0];if(!C)return;alert("Note: File Uploads require the 'client-assets' bucket. Saving as reference for now.");const{error:T}=await P.from("assets").insert([{name:C.name,type:C.type,file_url:"#",client_id:t.id}]);T||w()},S=()=>n==="tasks"?e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("form",{onSubmit:k,className:"flex gap-4",children:[e.jsx("input",{type:"text",value:o,onChange:p=>d(p.target.value),placeholder:"Add a new task for this client...",className:"flex-1 bg-transparent border-b-2 border-slate-200 focus:border-teal-500 px-4 py-2 outline-none transition-colors"}),e.jsx("button",{type:"submit",className:"bg-teal-600 hover:bg-teal-700 text-white p-2 rounded-lg transition-colors",children:e.jsx(we,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"space-y-2",children:a.length===0?e.jsx("p",{className:"text-slate-400 italic",children:"No tasks yet."}):a.map(p=>e.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-lg shadow-sm flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-400"}),e.jsx("span",{className:"text-slate-700",children:p.text})]},p.id))})]}):n==="brand"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"p-6 bg-white rounded-xl border border-slate-200",children:[e.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Ss,{className:"w-4 h-4 text-purple-600"})," Brand Colors"]}),t.brand_colors?e.jsx("div",{className:"flex flex-wrap gap-3",children:t.brand_colors.split(",").map((p,C)=>e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg shadow-sm border border-slate-100 cursor-pointer transition-transform hover:scale-110",style:{backgroundColor:p.trim()},title:p.trim()}),e.jsx("span",{className:"text-xs text-slate-500 mt-1 block text-center font-mono",children:p.trim()})]},C))}):e.jsx("p",{className:"text-slate-400 italic",children:"No colors defined."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 bg-white rounded-xl border border-slate-200",children:[e.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Typography"}),e.jsx("p",{className:"text-slate-600 font-medium",children:t.fonts||"No fonts defined."})]}),e.jsxs("div",{className:"p-6 bg-white rounded-xl border border-slate-200",children:[e.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Tone of Voice"}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:t.tone_of_voice||"No tone defined."})]})]})]}):n==="vault"?e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-bold text-slate-800",children:"Secure Credentials"}),e.jsxs("button",{onClick:()=>x(!g),className:"text-sm bg-slate-900 text-white px-3 py-1.5 rounded-lg flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"})," Add Item"]})]}),g&&e.jsxs("form",{onSubmit:E,className:"bg-slate-50 p-4 rounded-xl border border-slate-200 grid grid-cols-2 gap-4",children:[e.jsx("input",{className:"p-2 rounded border",placeholder:"Title (e.g. WordPress)",value:j.title,onChange:p=>m({...j,title:p.target.value})}),e.jsx("input",{className:"p-2 rounded border",placeholder:"Login URL",value:j.url,onChange:p=>m({...j,url:p.target.value})}),e.jsx("input",{className:"p-2 rounded border",placeholder:"Username",value:j.username,onChange:p=>m({...j,username:p.target.value})}),e.jsx("input",{className:"p-2 rounded border",placeholder:"Password",value:j.password,onChange:p=>m({...j,password:p.target.value})}),e.jsx("button",{type:"submit",className:"col-span-2 bg-teal-600 text-white font-bold py-2 rounded-lg",children:"Save Credential"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[c.map(p=>e.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-lg flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-50 rounded-lg flex items-center justify-center",children:e.jsx(Ns,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:p.title}),e.jsx("div",{className:"text-xs text-slate-400 font-mono",children:p.username})]})]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"p-2 hover:bg-slate-100 rounded text-slate-500",title:"Copy Password",onClick:()=>navigator.clipboard.writeText(p.password),children:e.jsx(Key,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 hover:bg-slate-100 rounded text-slate-500",title:"Open URL",onClick:()=>window.open(p.url,"_blank"),children:e.jsx(In,{className:"w-4 h-4"})})]})]},p.id)),c.length===0&&e.jsx("p",{className:"text-slate-400 italic text-center py-8",children:"Vault is empty."})]})]}):n==="assets"?e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-bold text-slate-800",children:"Files & Assets"}),e.jsxs("label",{className:"text-sm bg-slate-900 text-white px-3 py-1.5 rounded-lg flex items-center gap-2 cursor-pointer hover:bg-slate-800",children:[e.jsx(we,{className:"w-4 h-4"})," Upload File",e.jsx("input",{type:"file",className:"hidden",onChange:N})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[h.map(p=>e.jsxs("div",{className:"group relative bg-white border border-slate-200 p-4 rounded-xl hover:shadow-md transition-all",children:[e.jsx("div",{className:"aspect-square bg-slate-50 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:p.type&&p.type.includes("image")?e.jsx(Pn,{className:"w-8 h-8 text-slate-300"}):e.jsx(vs,{className:"w-8 h-8 text-slate-300"})}),e.jsx("div",{className:"font-bold text-sm text-slate-700 truncate",children:p.name}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:p.type})]},p.id)),h.length===0&&e.jsx("p",{className:"col-span-3 text-slate-400 italic text-center py-8",children:"No assets uploaded."})]})]}):e.jsx("div",{className:"p-8 text-center text-slate-400",children:"Coming Soon"});return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50/50",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 px-8 py-6 flex items-center justify-between sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-800 transition-colors",children:"← Back"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-extrabold text-slate-800",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${t.status==="Active"?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-600"}`,children:t.status}),e.jsx("span",{children:"•"}),e.jsx("span",{children:t.email})]})]})]})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-80 bg-white border-r border-slate-200 p-6 overflow-y-auto hidden lg:block",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-amber-600 font-bold text-sm uppercase tracking-wider",children:[e.jsx(Ts,{className:"w-4 h-4"})," Scope Guard"]}),e.jsx("div",{className:"bg-amber-50 border border-amber-100 p-4 rounded-xl text-sm text-amber-900 leading-relaxed shadow-sm",children:t.scope_of_work||"No scope defined. Add one to prevent scope creep!"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 mb-3",children:"Contact Details"}),e.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ws,{className:"w-4 h-4 text-slate-400"})," ",t.email]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kn,{className:"w-4 h-4 text-slate-400"})," ",t.phone||"--"]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Cs,{className:"w-4 h-4 text-slate-400 mt-1"})," ",t.address||"--"]})]})]}),e.jsxs("div",{className:"bg-slate-900 text-white p-4 rounded-xl",children:[e.jsx("div",{className:"text-slate-400 text-xs uppercase font-bold mb-1",children:"Hourly Rate"}),e.jsxs("div",{className:"text-2xl font-mono font-bold",children:["£",t.hourly_rate||"0.00","/hr"]})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx("div",{className:"flex border-b border-slate-200 bg-white px-6",children:["tasks","notes","brand","vault","assets"].map(p=>e.jsx("button",{onClick:()=>r(p),className:`px-6 py-4 text-sm font-bold border-b-2 transition-all capitalize ${n===p?"border-teal-500 text-teal-700":"border-transparent text-slate-500 hover:text-slate-800"}`,children:p},p))}),e.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:S()})})]})]})]})}function Sl(){const[t,s]=i.useState([]),[n,r]=i.useState(!0),[a,l]=i.useState(!1),[o,d]=i.useState("list"),[c,u]=i.useState(null);i.useEffect(()=>{h()},[]);const h=async()=>{r(!0);const{data:x,error:j}=await P.from("clients").select("*").order("created_at",{ascending:!1});j?console.error("Error fetching clients:",j):s(x||[]),r(!1)},f=x=>{u(x),d("detail")},g=()=>{u(null),d("list"),h()};return o==="detail"&&c?e.jsx(Cl,{client:c,onBack:g}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-extrabold text-slate-800",children:"Client Manager"}),e.jsx("p",{className:"text-slate-500",children:"Manage relationships, scope, and billing."})]}),e.jsxs("button",{onClick:()=>l(!0),className:"bg-brand-lilac hover:bg-brand-lilac-hover text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg transition-all",children:[e.jsx(we,{className:"w-5 h-5"})," Add Client"]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:n?e.jsx("div",{className:"flex items-center justify-center h-64 text-slate-400 animate-pulse",children:"Loading clients..."}):t.length===0?e.jsxs("div",{className:"text-center py-20 bg-white/50 rounded-2xl border-2 border-dashed border-slate-200",children:[e.jsx(Bt,{className:"w-16 h-16 mx-auto text-slate-400 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-slate-600",children:"No Clients Yet"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Add your first client to start tracking scope and tasks."}),e.jsx("button",{onClick:()=>l(!0),className:"text-brand-lilac font-bold hover:underline",children:"Create Client Profile"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:t.map(x=>e.jsxs("div",{onClick:()=>f(x),className:"bg-white/80 p-6 rounded-xl shadow-sm border border-slate-100 hover:shadow-md hover:border-brand-lilac/30 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-brand-lilac/20 to-blue-100 rounded-full flex items-center justify-center text-brand-lilac font-bold text-lg",children:x.name.substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 group-hover:text-brand-lilac transition-colors",children:x.name}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${x.status==="Active"?"bg-green-100 text-green-700":x.status==="Lead"?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-500"}`,children:x.status||"Active"})]})]}),e.jsx(Rn,{className:"w-5 h-5 text-slate-500 hover:text-slate-700"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[x.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx(ws,{className:"w-4 h-4"})," ",x.email]}),x.address&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx(Cs,{className:"w-4 h-4"})," ",e.jsx("span",{className:"truncate",children:x.address})]})]}),x.scope_of_work&&e.jsxs("div",{className:"bg-slate-50 p-2 rounded border border-slate-100 flex items-start gap-2 mb-2",children:[e.jsx(Es,{className:"w-4 h-4 text-brand-lilac shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:x.scope_of_work})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"font-mono text-slate-500",children:["£",x.hourly_rate||"0.00","/hr"]}),e.jsxs("span",{className:"text-brand-lilac font-bold flex items-center gap-1 group-hover:translate-x-1 transition-transform",children:["View Profile ",e.jsx(ct,{className:"w-4 h-4"})]})]})]},x.id))})}),a&&e.jsx(an,{onClose:()=>l(!1),onSuccess:()=>{l(!1),h()}})]})}const gs=[{name:"The Starter",hours:"10 Hours",description:"Best for: Solopreneurs who need their inbox tamed and systems watched.",price:"£300",features:["Inbox & Calendar Triage","System 'Health Checks'","Basic Admin Tasks","Monthly Report"]},{name:"The Growth",hours:"16 Hours",description:"Best for: Business owners with active clients who need consistent tech & admin support.",price:"£480",features:["Everything in Starter","Website Updates","Client Onboarding","Tech Support & Fixes","Priority Queue"],popular:!0},{name:"The Partner",hours:"24 Hours",description:"Best for: Busy owners who want to hand off operations entirely.",price:"£720",features:["Everything in Growth","Full Inbox Management","Process Documentation","Weekly Strategy Call"]}];function kl(){const[t,s]=i.useState(!1),[n,r]=i.useState([]),[a,l]=i.useState(""),[o,d]=i.useState(""),[c,u]=i.useState({docType:"invoice",clientName:"",clientAddress:"",projectTitle:"",scope:"",timeline:"Monthly Rolling",investment:"",invoiceNumber:`INV-${new Date().getFullYear()}-${Math.floor(Math.random()*1e3)}`,description:"",qty:"1",rate:"",amount:"£0.00"}),[h,f]=i.useState(!1);i.useEffect(()=>{f(!0),g()},[]);const g=async()=>{const{data:b}=await P.from("clients").select("*").order("name");b&&r(b)},x=b=>{const k=b.target.value;if(l(k),k){const D=n.find(E=>E.id===k);D&&u(E=>({...E,clientName:D.name,clientAddress:D.address||""}))}},j=b=>{const k=b.target.value;if(d(k),k){const D=gs.find(E=>E.name===k);D&&u(E=>({...E,description:`${D.name} Package (${D.hours})

Includes:
${D.features.map(w=>`• ${w}`).join(`
`)}`,rate:D.price.replace("£",""),qty:"1",scope:D.features.join(", "),investment:D.price}))}};i.useEffect(()=>{const b=(parseFloat(c.rate||0)*parseFloat(c.qty||1)).toFixed(2);u(k=>({...k,amount:`£${b}`}))},[c.rate,c.qty]);const m=b=>{u({...c,[b.target.name]:b.target.value})};return e.jsxs("div",{className:"glass-card rounded-2xl p-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"p-3 bg-brand-lilac/10 rounded-xl",children:e.jsx(pr,{className:"w-8 h-8 text-brand-lilac"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Smart Document Generator"}),e.jsx("p",{className:"text-slate-500",children:"Auto-fill documents from your CRM & Pricing data."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6 bg-slate-50 p-6 rounded-xl border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(Vn,{className:"w-4 h-4"})," 1. Select Context"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:"Document Type"}),e.jsxs("select",{name:"docType",value:c.docType,onChange:m,className:"w-full p-3 border border-slate-200 rounded-lg bg-white outline-none focus:ring-2 focus:ring-brand-lilac",children:[e.jsx("option",{value:"invoice",children:"Invoice"}),e.jsx("option",{value:"contract",children:"Service Agreement"}),e.jsx("option",{value:"proposal",children:"Proposal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:"Client (CRM)"}),e.jsxs("select",{value:a,onChange:x,className:"w-full p-3 border border-slate-200 rounded-lg bg-white outline-none focus:ring-2 focus:ring-brand-lilac",children:[e.jsx("option",{value:"",children:"-- Select Client --"}),n.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Updates Name & Address automatically."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:"Service Package"}),e.jsxs("select",{value:o,onChange:j,className:"w-full p-3 border border-slate-200 rounded-lg bg-white outline-none focus:ring-2 focus:ring-brand-lilac",children:[e.jsx("option",{value:"",children:"-- Custom / Manual --"}),gs.map(b=>e.jsxs("option",{value:b.name,children:[b.name," (",b.price,")"]},b.name))]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Auto-fills line items & rates."})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2 mb-4",children:[e.jsx(On,{className:"w-4 h-4"})," 2. Review & Edit Details"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Client Name"}),e.jsx("input",{type:"text",name:"clientName",value:c.clientName,onChange:m,className:"w-full p-2 border border-slate-200 rounded-lg"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Document Title / Invoice #"}),e.jsx("input",{type:"text",name:"invoiceNumber",value:c.invoiceNumber,onChange:m,className:"w-full p-2 border border-slate-200 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Description / Scope"}),e.jsx("textarea",{name:c.docType==="contract"?"scope":"description",value:c.docType==="contract"?c.scope:c.description,onChange:m,className:"w-full p-2 border border-slate-200 rounded-lg h-32 font-mono text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-slate-50 p-4 rounded-xl border border-slate-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Qty / Hours"}),e.jsx("input",{type:"number",name:"qty",value:c.qty,onChange:m,className:"w-full p-2 border border-slate-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Rate (£)"}),e.jsx("input",{type:"number",name:"rate",value:c.rate,onChange:m,className:"w-full p-2 border border-slate-200 rounded-lg"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Total"}),e.jsx("div",{className:"text-xl font-bold text-brand-green-dark mt-1",children:c.amount})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 flex justify-end",children:h&&c.clientName?e.jsx(bs,{document:c.docType==="contract"?e.jsx(pn,{data:c,logoUrl:window.location.origin+"/logo.png"}):c.docType==="invoice"?e.jsx(br,{data:c,logoUrl:window.location.origin+"/logo.png"}):e.jsx(gr,{data:c,logoUrl:window.location.origin+"/logo.png"}),fileName:`${c.docType.toUpperCase()}_${c.clientName.replace(/\s+/g,"_")}.pdf`,className:"flex items-center gap-2 bg-brand-lilac text-white px-8 py-3 rounded-xl font-bold hover:bg-brand-lilac-hover transition-all shadow-lg hover:scale-[1.02]",children:({loading:b})=>b?"Generating...":e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"w-5 h-5"})," Download PDF"]})}):e.jsxs("button",{disabled:!0,className:"bg-slate-200 text-slate-400 px-8 py-3 rounded-xl font-bold cursor-not-allowed flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5"})," Fill details to Download"]})})]})]})]})}function Bl(){const[t,s]=i.useState("dashboard");return e.jsx(yl,{children:e.jsxs("div",{className:"flex h-screen w-full overflow-hidden font-sans",style:{background:"linear-gradient(135deg, #f5f7fa 0%, #d8e2ec 100%)"},children:[e.jsx(wl,{activeTab:t,onTabChange:s}),e.jsxs("main",{className:"flex-1 h-full overflow-y-auto p-8 md:p-12 relative",children:[t==="dashboard"&&e.jsx(Nl,{onNavigate:s}),t==="triage"&&e.jsxs("div",{className:"glass-card rounded-2xl p-8 min-h-[600px]",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-slate-800 mb-2",children:"Task Triage"}),e.jsx("p",{className:"text-slate-600 mb-8",children:"Eisenhower Matrix enabled via Supabase."}),e.jsx(xl,{})]}),t==="timekeeper"&&e.jsxs("div",{className:"glass-card rounded-2xl p-8 max-w-2xl mx-auto mt-10",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-slate-800 mb-2 text-center",children:"Time Tracker"}),e.jsx("p",{className:"text-slate-600 mb-8 text-center",children:"Track your billable hours efficiently."}),e.jsx(pl,{})]}),t==="clients"&&e.jsx("div",{className:"glass-card rounded-2xl p-8 h-full min-h-[600px]",children:e.jsx(Sl,{})}),t==="documents"&&e.jsx(kl,{}),t==="onboarding"&&e.jsxs("div",{className:"glass-card rounded-2xl p-8 h-full overflow-y-auto",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-slate-800 mb-2",children:"New Client Onboarding"}),e.jsx("p",{className:"text-slate-600 mb-8",children:"Guided wizard to capture client identity, brand kit, and credentials."}),e.jsx(vl,{})]})]})]})})}export{Bl as default};
